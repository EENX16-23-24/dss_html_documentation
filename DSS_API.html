
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>2. Drone Safety System API &#8212; RISE Drone Platform v1.3.0.post36-g455f561 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script>mermaid.initialize({startOnLoad:true});</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="3. Central Resource Manager API" href="CRM_API.html" />
    <link rel="prev" title="1. Introduction" href="introduction.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="drone-safety-system-api">
<span id="dssapi"></span><h1><span class="section-number">2. </span>Drone Safety System API<a class="headerlink" href="#drone-safety-system-api" title="Permalink to this heading">¶</a></h1>
<p id="index-0">The Drone Safety System acts as a safety bridge towards the communication with the
drone autopilot and offers applications to connect and control a drone
via a unified API. The Drone Safety System currently supports Ardupilot and DJI
autopilot software, and the system is supposed to be agnostic to
autopilot - an application developed for Ardupilot should be able to
run with the DJI autopilot without (major) updates in the application
code.</p>
<p>The Drone Safety System takes care of the low level functionality. An application
software connects to the Drone Safety System and executes custom made missions.
Applications can be written in any language and be hosted anywhere on
the network. The communication library ZeroMQ is used to share
information between entities independent on architecture and code
base.</p>
<p>The controls of the drone can be handled by the PILOT, the APPLICATION
or the DSS itself. The safety pilot gives the controls to the
application when the drone is set up. If the application disconnects
or loses link, the DSS will take the controls. The safety pilot can at
any given time take the controls back from both DSS and APPLICATION.
When the application is not in controls the application is prohibited
to controlling the drone, but it can still acquire information and
upload missions for future execution. If a DSS function is unavailable
when an application is not in controls, the application will receive a
NACK response from the DSS. This is described in more detail in the
API specification later on in this chapter.</p>
<p>The final component in the figure below is the Central Resource
Manager (CRM). The CRM is mainly responsible for managing the
available drone resources to applications. However, it can also launch
a new application to control the drone if the previous application
owner for some reason loses connection to the drone during flight.
Nowdays we strive to use the CRM for all applications and scenarios.
It is the default option, however it is still possible to run
applications without the CRM if they are developed to support it.</p>
<figure class="align-default" id="id3">
<a class="reference internal image-reference" href="_images/drone_platform_overview_pilot.png"><img alt="_images/drone_platform_overview_pilot.png" src="_images/drone_platform_overview_pilot.png" style="width: 500px;" /></a>
<figcaption>
<p><span class="caption-text">Drone software platform architecture overview</span><a class="headerlink" href="#id3" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<section id="communication">
<h2><span class="section-number">2.1. </span>Communication<a class="headerlink" href="#communication" title="Permalink to this heading">¶</a></h2>
<p id="index-1">The Drone Safety System offers three external interfaces towards an application. To
support any code base in the application, commands are encoded in
serialised JSON objects and transferred via zeroMQ library.</p>
<ul class="simple">
<li><p>DSS Ctrl Reply-socket where the application can call functions and
receive ack/nack and information</p></li>
<li><p>Info Publish-socket where data streams can be published, e.g.
autopilot state data</p></li>
<li><p>Data Publish-socket for bigger data structures, e.g. photos</p></li>
</ul>
<p>Available commands are described in <a class="reference internal" href="#dsscontrolapi"><span class="std std-ref">DSS Ctrl-link API</span></a>.</p>
<p>The socket ports for non CRM operations are described below. In CRM
operations the CRM will present the ip and Ctrl-Reply-socket port for
each client, and the publish ports can be requested by directly
connecting to the client of interest and issuing get_info. The sockets
are open for all connecting ip-numbers.</p>
<div class="literal-block-wrapper docutils container" id="id4">
<div class="code-block-caption"><span class="caption-text">Sockets port definition if <strong>NOT</strong> using CRM</span><a class="headerlink" href="#id4" title="Permalink to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="p">{</span>
<span class="linenos">2</span><span class="w">  </span><span class="nt">&quot;Ctrl-Reply-socket&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">5557</span><span class="p">,</span>
<span class="linenos">3</span><span class="w">  </span><span class="nt">&quot;Info-Publish-Socket&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">5558</span><span class="p">,</span>
<span class="linenos">4</span><span class="w">  </span><span class="nt">&quot;Data-Publish-Socket&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">5559</span>
<span class="linenos">5</span><span class="p">}</span>
</pre></div>
</div>
</div>
<p>Each function call must include an application id. This is because
each DSS is owned by someone (application id), and that the owner has
higher level permissions than non-owners. Some commands requires that
the command is sent from the dss owner in order to be acknowledged by
the DSS, while some commands can be used by everyone. This is
explained in more detail in the Nack reasons for each command in the
API.</p>
<p>In scenarios where CRM is used the application id is distributed by
the CRM in the setup phase. In scenarios without CRM, the application
must use the default application id <code class="code highlight python docutils literal highlight-python"><span class="s2">&quot;da000&quot;</span></code>.</p>
</section>
<section id="coordinate-systems">
<span id="coordinatesystems"></span><h2><span class="section-number">2.2. </span>Coordinate systems<a class="headerlink" href="#coordinate-systems" title="Permalink to this heading">¶</a></h2>
<p>The Drone Safety System handles three coordinate systems, LLA, NED and XYZ. The are
defined in this section.</p>
<section id="lla-coordinate-system">
<span id="llacoordinatesystem"></span><h3><span class="section-number">2.2.1. </span>LLA coordinate system<a class="headerlink" href="#lla-coordinate-system" title="Permalink to this heading">¶</a></h3>
<p>The LLA coordinate system is global and stands for Latitude,
Longitude, Altitude.</p>
<dl class="simple">
<dt><strong>Units:</strong></dt><dd><ul class="simple">
<li><p>Latitude, Longitude [decimal degrees]</p></li>
<li><p>Alt [m AMSL]</p></li>
<li><p>Heading [deg relative true north]</p></li>
</ul>
</dd>
</dl>
</section>
<section id="ned-coordinate-system">
<span id="nedcoordinatesystem"></span><h3><span class="section-number">2.2.2. </span>NED coordinate system<a class="headerlink" href="#ned-coordinate-system" title="Permalink to this heading">¶</a></h3>
<p>The NED coordinate system is local and stands for North, East, Down.
The coordinate system is relative to the init point, refer to function
<a class="reference internal" href="#fcnsetinitpoint"><span class="std std-ref">Fcn: set_init_point</span></a>.</p>
<dl class="simple">
<dt><strong>Units:</strong></dt><dd><ul class="simple">
<li><p>North, East, Down [m relative init point]</p></li>
<li><p>Heading [deg relative true north]</p></li>
</ul>
</dd>
</dl>
</section>
<section id="xyz-coordinate-system">
<span id="xyzcoordinatesystem"></span><h3><span class="section-number">2.2.3. </span>XYZ coordinate system<a class="headerlink" href="#xyz-coordinate-system" title="Permalink to this heading">¶</a></h3>
<p>The XYZ coordinate system is local and is relative to the init point,
refer to function <a class="reference internal" href="#fcnsetinitpoint"><span class="std std-ref">Fcn: set_init_point</span></a>. The orientation of the
coordinate system depends on the camera heading (or drone heading if a
camera is not used) when init is called. X maps is defined in the
camera heading, Y 90 degrees right and Z downwards.</p>
<aside class="topic">
<p class="topic-title">Example</p>
<p>The drone is placed on ground, with heading 80 deg relaitve true
north, and the camera camera heading is rotated 10 deg relative to
the drone, .i.e. pointing 90 deg relative true north. The init
function <a class="reference internal" href="#fcnsetinitpoint"><span class="std std-ref">Fcn: set_init_point</span></a> is called and the XYZ coordinate
system is set. X is now defined as East, Y as South and Z downwards.</p>
</aside>
<dl class="simple">
<dt><strong>Units:</strong></dt><dd><ul class="simple">
<li><p>X, Y, Z [m relative init point in XYZ system]</p></li>
<li><p>Heading [deg relative X-axis definition, around Z-axis]</p></li>
</ul>
</dd>
</dl>
</section>
<section id="geo-fence">
<span id="geofence"></span><h3><span class="section-number">2.2.4. </span>Geo fence<a class="headerlink" href="#geo-fence" title="Permalink to this heading">¶</a></h3>
<p>The Drone Safety System implements a geo fence as a low height limit, a high height
limit and a radius relative to the init point, <a class="reference internal" href="#fcnsetinitpoint"><span class="std std-ref">Fcn: set_init_point</span></a>.
The low height limit is only used for checking missions that are
uploaded.</p>
<p>Geo fence parameters can be changed, refer to function
<a class="reference internal" href="#fcnsetgeofence"><span class="std std-ref">Fcn: set_geofence</span></a>.</p>
<p>Missions are checked towards the geo fence when uploaded, missions
violating the geofence are rejected.</p>
</section>
</section>
<section id="dss-ctrl-link-api">
<span id="dsscontrolapi"></span><h2><span class="section-number">2.3. </span>DSS Ctrl-link API<a class="headerlink" href="#dss-ctrl-link-api" title="Permalink to this heading">¶</a></h2>
<section id="general">
<span id="index-2"></span><h3><span class="section-number">2.3.1. </span>General<a class="headerlink" href="#general" title="Permalink to this heading">¶</a></h3>
<p>The ZeroMQ REQ/REP interface takes function calls as JSON objects with
two mandatory keys, <code class="code highlight python docutils literal highlight-python"><span class="s2">&quot;fcn&quot;</span></code> and <code class="code highlight python docutils literal highlight-python"><span class="s2">&quot;id&quot;</span></code>, the string
values are the function name and the application id. Additional keys
are described in this API chapter. Each function call gets confirmed
with an ack or a nack where the key <code class="code highlight python docutils literal highlight-python"><span class="s2">&quot;call&quot;</span></code> holds the name of
the calling function. A generic example follows:</p>
<div class="literal-block-wrapper docutils container" id="id5">
<div class="code-block-caption"><span class="caption-text">Generic function call from application to Drone Safety System</span><a class="headerlink" href="#id5" title="Permalink to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="p">{</span>
<span class="linenos">2</span><span class="w">  </span><span class="nt">&quot;fcn&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;function name&gt;&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;requestor id&gt;&quot;</span>
<span class="linenos">3</span><span class="p">}</span>
</pre></div>
</div>
</div>
<p>Response from Drone Safety System is an ack or a nack. The key <code class="code highlight python docutils literal highlight-python"><span class="s2">&quot;call&quot;</span></code>
carries the name of the function called. Some functions uses the ack
reply to transfer data, which can be seen in the listings of the API
below. A nack includes the key <code class="code highlight python docutils literal highlight-python"><span class="s2">&quot;description&quot;</span></code> that carries a
nack description string.</p>
<div class="literal-block-wrapper docutils container" id="id6">
<div class="code-block-caption"><span class="caption-text">Generic response: <code class="docutils literal notranslate"><span class="pre">ack</span></code></span><a class="headerlink" href="#id6" title="Permalink to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="p">{</span>
<span class="linenos">2</span><span class="w">  </span><span class="nt">&quot;fcn&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ack&quot;</span><span class="p">,</span>
<span class="linenos">3</span><span class="w">  </span><span class="nt">&quot;call&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;function_name&gt;&quot;</span>
<span class="linenos">4</span><span class="p">}</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id7">
<div class="code-block-caption"><span class="caption-text">Generic response: <code class="docutils literal notranslate"><span class="pre">nack</span></code></span><a class="headerlink" href="#id7" title="Permalink to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="p">{</span>
<span class="linenos">2</span><span class="w">  </span><span class="nt">&quot;fcn&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;nack&quot;</span><span class="p">,</span>
<span class="linenos">3</span><span class="w">  </span><span class="nt">&quot;call&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;function name&gt;&quot;</span><span class="p">,</span>
<span class="linenos">4</span><span class="w">  </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;Nack reason&gt;&quot;</span>
<span class="linenos">5</span><span class="p">}</span>
</pre></div>
</div>
</div>
</section>
<section id="fcn-heart-beat">
<h3><span class="section-number">2.3.2. </span>Fcn: <code class="docutils literal notranslate"><span class="pre">heart_beat</span></code><a class="headerlink" href="#fcn-heart-beat" title="Permalink to this heading">¶</a></h3>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><img alt="_images/ArduPilot-not_implemented-lightgrey.png" src="_images/ArduPilot-not_implemented-lightgrey.png" />
</td>
<td><img alt="_images/DJI-verified-brightgreen.png" src="_images/DJI-verified-brightgreen.png" />
</td>
<td><img alt="_images/py--client-verified-brightgreen.png" src="_images/py--client-verified-brightgreen.png" />
</td>
</tr>
</tbody>
</table>
<p>The Drone Safety System tracks the activity from the application to survey if the
application is still alive. Each and every function call from
the application to the Drone Safety System acts as a heartbeat. If no other messages
are sent from the application to the Drone Safety System, the application shall call
the <code class="docutils literal notranslate"><span class="pre">heart_beat</span></code> function to maintain the link integrity. The link
is considered degraded after 5 seconds and lost after 10 seconds.</p>
<p>The link lost behaviour differs depending on if the Central Resource Manager is used or not as
described below.</p>
<section id="crm-not-used-behaviour">
<h4><span class="section-number">2.3.2.1. </span>Central Resource Manager not used behaviour:<a class="headerlink" href="#crm-not-used-behaviour" title="Permalink to this heading">¶</a></h4>
<p>The Drone Safety System will engage the autopilot implementation of the Return To
Launch (RTL) command.</p>
</section>
<section id="crm-is-used-behaviour">
<h4><span class="section-number">2.3.2.2. </span>Central Resource Manager is used behaviour:<a class="headerlink" href="#crm-is-used-behaviour" title="Permalink to this heading">¶</a></h4>
<p>The Drone Safety System will notify the CRM using the function <cite>app_lost</cite>. If it
receives an ack, the Drone Safety System will reset the lost link counter. In the
meantime the Central Resource Manager will launch an application that claims ownership of
the Drone Safety System and will send heart beats. If the lost link counter reaches
the limit for the second time without receiving any heartbeats in
between the Drone Safety System will engage the autopilot implementation of RTL.</p>
<p>If it receives a nack (or no response) Drone Safety System will engage the autopilot
implementation of RTL.</p>
<div class="literal-block-wrapper docutils container" id="id8">
<div class="code-block-caption"><span class="caption-text">Function call <code class="docutils literal notranslate"><span class="pre">heart_beat</span></code></span><a class="headerlink" href="#id8" title="Permalink to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="p">{</span>
<span class="linenos">2</span><span class="w">  </span><span class="nt">&quot;fcn&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;heart_beat&quot;</span><span class="p">,</span>
<span class="linenos">3</span><span class="w">  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;requestor id&gt;&quot;</span>
<span class="linenos">4</span><span class="p">}</span>
</pre></div>
</div>
</div>
<p>The DSS responds to the <code class="docutils literal notranslate"><span class="pre">heart_beat</span></code> function call with an ack.</p>
<div class="literal-block-wrapper docutils container" id="id9">
<div class="code-block-caption"><span class="caption-text">Response to <code class="docutils literal notranslate"><span class="pre">heart_beat</span></code></span><a class="headerlink" href="#id9" title="Permalink to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="p">{</span>
<span class="linenos">2</span><span class="w">  </span><span class="nt">&quot;fcn&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ack&quot;</span><span class="p">,</span>
<span class="linenos">3</span><span class="w">  </span><span class="nt">&quot;call&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;heart_beat&quot;</span>
<span class="linenos">4</span><span class="p">}</span>
</pre></div>
</div>
</div>
<dl class="simple">
<dt><strong>Nack reasons:</strong></dt><dd><ul class="simple">
<li><p>Requester (<code class="docutils literal notranslate"><span class="pre">id</span></code>) is not the DSS owner</p></li>
</ul>
</dd>
</dl>
</section>
</section>
<section id="fcn-get-info">
<span id="fcngetinfo"></span><h3><span class="section-number">2.3.3. </span>Fcn: get_info<a class="headerlink" href="#fcn-get-info" title="Permalink to this heading">¶</a></h3>
<p>The function <code class="docutils literal notranslate"><span class="pre">get_info</span></code> requests connection information from the DSS.
The DSS answers with an ack and the applicable information.</p>
<div class="literal-block-wrapper docutils container" id="id10">
<div class="code-block-caption"><span class="caption-text">Function call: <code class="docutils literal notranslate"><span class="pre">get_info</span></code></span><a class="headerlink" href="#id10" title="Permalink to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="p">{</span>
<span class="linenos">2</span><span class="w">  </span><span class="nt">&quot;fcn&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;get_info&quot;</span><span class="p">,</span>
<span class="linenos">3</span><span class="w">  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;requestor id&gt;&quot;</span>
<span class="linenos">4</span><span class="p">}</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id11">
<div class="code-block-caption"><span class="caption-text">Reply: <code class="docutils literal notranslate"><span class="pre">get_info</span></code></span><a class="headerlink" href="#id11" title="Permalink to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="p">{</span>
<span class="linenos">2</span><span class="w">  </span><span class="nt">&quot;fcn&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ack&quot;</span><span class="p">,</span>
<span class="linenos">3</span><span class="w">  </span><span class="nt">&quot;call&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;get_info&quot;</span><span class="p">,</span>
<span class="linenos">4</span><span class="w">  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;replier id&gt;&quot;</span><span class="p">,</span>
<span class="linenos">5</span><span class="w">  </span><span class="nt">&quot;info_pub_port&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1234</span><span class="p">,</span>
<span class="linenos">6</span><span class="w">  </span><span class="nt">&quot;data_pub_port&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">5678</span>
<span class="linenos">7</span><span class="p">}</span>
</pre></div>
</div>
</div>
<dl class="simple">
<dt><strong>Nack reasons:</strong></dt><dd><ul class="simple">
<li><p>None</p></li>
</ul>
</dd>
</dl>
</section>
<section id="fcn-who-controls">
<span id="whocontrols"></span><h3><span class="section-number">2.3.4. </span>Fcn: <code class="docutils literal notranslate"><span class="pre">who_controls</span></code><a class="headerlink" href="#fcn-who-controls" title="Permalink to this heading">¶</a></h3>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><img alt="_images/ArduPilot-not_implemented-lightgrey.png" src="_images/ArduPilot-not_implemented-lightgrey.png" />
</td>
<td><img alt="_images/DJI-verified-brightgreen.png" src="_images/DJI-verified-brightgreen.png" />
</td>
<td><img alt="_images/py--client-verified-brightgreen.png" src="_images/py--client-verified-brightgreen.png" />
</td>
</tr>
</tbody>
</table>
<p>The function <code class="docutils literal notranslate"><span class="pre">who_controls</span></code> requests who is in control of the drone,
the “APPLICATION” (drone application) the “PILOT” (pilot in command)
or the “DSS” itself. While the pilot is in control the Drone Safety System is not
allowed to control the drone. This is a safety feature.</p>
<p>The response holds the key “in_controls” that carries the string
“PILOT”, “APPLICATION” or “DSS”. CRM is treated as an application.</p>
<div class="admonition-todo admonition" id="id1">
<p class="admonition-title">Todo</p>
<p>Should operator == PILOT be a nack reason for all commands affecting the drone?</p>
</div>
<div class="literal-block-wrapper docutils container" id="id12">
<div class="code-block-caption"><span class="caption-text">Function call: <code class="docutils literal notranslate"><span class="pre">who_controls</span></code></span><a class="headerlink" href="#id12" title="Permalink to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="p">{</span>
<span class="linenos">2</span><span class="w">  </span><span class="nt">&quot;fcn&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;who_controls&quot;</span><span class="p">,</span>
<span class="linenos">3</span><span class="w">  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;requestor id&gt;&quot;</span><span class="p">,</span>
<span class="linenos">4</span><span class="p">}</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id13">
<div class="code-block-caption"><span class="caption-text">Function response:</span><a class="headerlink" href="#id13" title="Permalink to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="p">{</span>
<span class="linenos">2</span><span class="w">  </span><span class="nt">&quot;fcn&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ack&quot;</span><span class="p">,</span>
<span class="linenos">3</span><span class="w">  </span><span class="nt">&quot;call&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;who_controls&quot;</span><span class="p">,</span>
<span class="linenos">4</span><span class="w">  </span><span class="nt">&quot;in_controls&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;APPLICATION&quot;</span>
<span class="linenos">5</span><span class="p">}</span>
</pre></div>
</div>
</div>
<dl class="simple">
<dt><strong>Nack reasons:</strong></dt><dd><ul class="simple">
<li><p>None</p></li>
</ul>
</dd>
</dl>
</section>
<section id="fcn-get-owner">
<span id="getowner"></span><h3><span class="section-number">2.3.5. </span>Fcn: <code class="docutils literal notranslate"><span class="pre">get_owner</span></code><a class="headerlink" href="#fcn-get-owner" title="Permalink to this heading">¶</a></h3>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><img alt="_images/ArduPilot-not_implemented-lightgrey.png" src="_images/ArduPilot-not_implemented-lightgrey.png" />
</td>
<td><img alt="_images/DJI-implemented-blue.png" src="_images/DJI-implemented-blue.png" />
</td>
<td><img alt="_images/py--client-not_implemented-lightgrey.png" src="_images/py--client-not_implemented-lightgrey.png" />
</td>
</tr>
</tbody>
</table>
<p>The function <code class="docutils literal notranslate"><span class="pre">get_owner</span></code> requests the registered owner of the DSS.</p>
<p>The response holds the key “owner” that carries the string with the
application id of the owner. The default owner is “da000”.</p>
<div class="literal-block-wrapper docutils container" id="id14">
<div class="code-block-caption"><span class="caption-text">Function call: <code class="docutils literal notranslate"><span class="pre">get_owner</span></code></span><a class="headerlink" href="#id14" title="Permalink to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="p">{</span>
<span class="linenos">2</span><span class="w">  </span><span class="nt">&quot;fcn&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;get_owner&quot;</span><span class="p">,</span>
<span class="linenos">3</span><span class="w">  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;requestor id&gt;&quot;</span><span class="p">,</span>
<span class="linenos">4</span><span class="p">}</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id15">
<div class="code-block-caption"><span class="caption-text">Function response:</span><a class="headerlink" href="#id15" title="Permalink to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="p">{</span>
<span class="linenos">2</span><span class="w">  </span><span class="nt">&quot;fcn&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ack&quot;</span><span class="p">,</span>
<span class="linenos">3</span><span class="w">  </span><span class="nt">&quot;call&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;get_owner&quot;</span><span class="p">,</span>
<span class="linenos">4</span><span class="w">  </span><span class="nt">&quot;owner&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;owner id&gt;&quot;</span>
<span class="linenos">5</span><span class="p">}</span>
</pre></div>
</div>
</div>
<dl class="simple">
<dt><strong>Nack reasons:</strong></dt><dd><ul class="simple">
<li><p>None</p></li>
</ul>
</dd>
</dl>
</section>
<section id="fcn-set-owner">
<span id="fcnsetowner"></span><h3><span class="section-number">2.3.6. </span>Fcn: <code class="docutils literal notranslate"><span class="pre">set_owner</span></code><a class="headerlink" href="#fcn-set-owner" title="Permalink to this heading">¶</a></h3>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><img alt="_images/ArduPilot-not_implemented-lightgrey.png" src="_images/ArduPilot-not_implemented-lightgrey.png" />
</td>
<td><img alt="_images/DJI-implemented-blue.png" src="_images/DJI-implemented-blue.png" />
</td>
<td><img alt="_images/py--client-not_implemented-lightgrey.png" src="_images/py--client-not_implemented-lightgrey.png" />
</td>
</tr>
</tbody>
</table>
<p>The function <code class="docutils literal notranslate"><span class="pre">set_owner</span></code> sets the DSS owner. The function call holds
the key “owner” with a string with the new owners id. The reply holds
an ack or a nack.</p>
<div class="literal-block-wrapper docutils container" id="id16">
<div class="code-block-caption"><span class="caption-text">Function call: <code class="docutils literal notranslate"><span class="pre">set_owner</span></code></span><a class="headerlink" href="#id16" title="Permalink to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="p">{</span>
<span class="linenos">2</span><span class="w">  </span><span class="nt">&quot;fcn&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;set_owner&quot;</span><span class="p">,</span>
<span class="linenos">3</span><span class="w">  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;requestor id&gt;&quot;</span><span class="p">,</span>
<span class="linenos">4</span><span class="w">  </span><span class="nt">&quot;owner&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;the new owner&gt;&quot;</span>
<span class="linenos">5</span><span class="p">}</span>
</pre></div>
</div>
</div>
<dl class="simple">
<dt><strong>Nack reasons:</strong></dt><dd><ul class="simple">
<li><p>Requestor is not CRM</p></li>
</ul>
</dd>
</dl>
</section>
<section id="fcn-set-geofence">
<span id="fcnsetgeofence"></span><h3><span class="section-number">2.3.7. </span>Fcn: <code class="docutils literal notranslate"><span class="pre">set_geofence</span></code><a class="headerlink" href="#fcn-set-geofence" title="Permalink to this heading">¶</a></h3>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><img alt="_images/ArduPilot-not_implemented-lightgrey.png" src="_images/ArduPilot-not_implemented-lightgrey.png" />
</td>
<td><img alt="_images/DJI-implemented-blue.png" src="_images/DJI-implemented-blue.png" />
</td>
</tr>
</tbody>
</table>
<p>The function <code class="docutils literal notranslate"><span class="pre">set_geofence</span></code> sets the geo fence. The message takes
doubles for the keys “height_low”, “height_high” and “radius”, the unit
is meters. The geo fence is evaluated relative the start position,
refer to section <a class="reference internal" href="#geofence"><span class="std std-ref">Geo fence</span></a>.</p>
<p>Geofence default settings: Low height 2m, high height 50m, radius 50m.</p>
<div class="literal-block-wrapper docutils container" id="id17">
<div class="code-block-caption"><span class="caption-text">Function call: <code class="docutils literal notranslate"><span class="pre">set_geofence</span></code></span><a class="headerlink" href="#id17" title="Permalink to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="p">{</span>
<span class="linenos">2</span><span class="w">  </span><span class="nt">&quot;fcn&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;set_geofence&quot;</span><span class="p">,</span>
<span class="linenos">3</span><span class="w">  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;requestor id&gt;&quot;</span><span class="p">,</span>
<span class="linenos">4</span><span class="w">  </span><span class="nt">&quot;height_low&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span>
<span class="linenos">5</span><span class="w">  </span><span class="nt">&quot;height_high&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span>
<span class="linenos">6</span><span class="w">  </span><span class="nt">&quot;radius&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span>
<span class="linenos">7</span><span class="p">}</span>
</pre></div>
</div>
</div>
<dl class="simple">
<dt><strong>Nack reasons:</strong></dt><dd><ul class="simple">
<li><p>Requester (<code class="docutils literal notranslate"><span class="pre">id</span></code>) is not the DSS owner</p></li>
</ul>
</dd>
</dl>
</section>
<section id="fcn-get-idle">
<span id="getidle"></span><h3><span class="section-number">2.3.8. </span>Fcn: <code class="docutils literal notranslate"><span class="pre">get_idle</span></code><a class="headerlink" href="#fcn-get-idle" title="Permalink to this heading">¶</a></h3>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><img alt="_images/ArduPilot-not_implemented-lightgrey.png" src="_images/ArduPilot-not_implemented-lightgrey.png" />
</td>
<td><img alt="_images/DJI-verified-brightgreen.png" src="_images/DJI-verified-brightgreen.png" />
</td>
<td><img alt="_images/py--client-verified-brightgreen.png" src="_images/py--client-verified-brightgreen.png" />
</td>
</tr>
</tbody>
</table>
<p>The function <code class="docutils literal notranslate"><span class="pre">get_idle</span></code> reports false if task is running, i.e. take-off, fly
waypoints or landing for example, otherwise true. Can be used for awaiting
take-off to complete for example</p>
<div class="literal-block-wrapper docutils container" id="id18">
<div class="code-block-caption"><span class="caption-text">Function call: <code class="docutils literal notranslate"><span class="pre">get_idle</span></code></span><a class="headerlink" href="#id18" title="Permalink to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="p">{</span>
<span class="linenos">2</span><span class="w">  </span><span class="nt">&quot;fcn&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;get_idle&quot;</span><span class="p">,</span>
<span class="linenos">3</span><span class="w">  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;requestor id&gt;&quot;</span>
<span class="linenos">4</span><span class="p">}</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id19">
<div class="code-block-caption"><span class="caption-text">Function response:</span><a class="headerlink" href="#id19" title="Permalink to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="p">{</span>
<span class="linenos">2</span><span class="w">  </span><span class="nt">&quot;fcn&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ack&quot;</span><span class="p">,</span>
<span class="linenos">3</span><span class="w">  </span><span class="nt">&quot;idle&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
<span class="linenos">4</span><span class="p">}</span>
</pre></div>
</div>
</div>
<dl class="simple">
<dt><strong>Nack reasons:</strong></dt><dd><ul class="simple">
<li><p>None</p></li>
</ul>
</dd>
</dl>
</section>
<section id="fcn-get-state">
<span id="fcngetstate"></span><h3><span class="section-number">2.3.9. </span>Fcn: <code class="docutils literal notranslate"><span class="pre">get_state</span></code><a class="headerlink" href="#fcn-get-state" title="Permalink to this heading">¶</a></h3>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><img alt="_images/ArduPilot-not_implemented-lightgrey.png" src="_images/ArduPilot-not_implemented-lightgrey.png" />
</td>
<td><img alt="_images/DJI-verified-brightgreen.png" src="_images/DJI-verified-brightgreen.png" />
</td>
<td><img alt="_images/py--client-verified-brightgreen.png" src="_images/py--client-verified-brightgreen.png" />
</td>
</tr>
</tbody>
</table>
<p>The function get state acquires one instance of the STATE-message that also can
be subscribed to as a data-stream.</p>
<p>Lat, long [Decimal degrees]; Alt [m AMSL]; Heading [degrees relative true
north]; Agl [m] above ground, -1 if not valid; . vel_n, vel_e, vel_d [m/s] in
NED frame and gnss_state [0-6] with mapping described below, key ‘flight_state’
reports a state machine that is initiated ‘ground’, after take off flight_state
will and then toggle between ‘flying’ and ‘landed’ (ground -&gt; flying &lt;-&gt; landed)</p>
<div class="literal-block-wrapper docutils container" id="id20">
<div class="code-block-caption"><span class="caption-text">Function call: <code class="docutils literal notranslate"><span class="pre">get_state</span></code></span><a class="headerlink" href="#id20" title="Permalink to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="p">{</span>
<span class="linenos">2</span><span class="w">  </span><span class="nt">&quot;fcn&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;get_state&quot;</span><span class="p">,</span>
<span class="linenos">3</span><span class="w">  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;requestor id&gt;&quot;</span>
<span class="linenos">4</span><span class="p">}</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id21">
<div class="code-block-caption"><span class="caption-text">Function call: <code class="docutils literal notranslate"><span class="pre">get_state</span></code></span><a class="headerlink" href="#id21" title="Permalink to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="p">{</span>
<span class="linenos"> 2</span><span class="w">  </span><span class="nt">&quot;fcn&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ack&quot;</span><span class="p">,</span>
<span class="linenos"> 3</span><span class="w">  </span><span class="nt">&quot;lat&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">-0.0018926148768514395</span><span class="p">,</span>
<span class="linenos"> 4</span><span class="w">  </span><span class="nt">&quot;long&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0014366497052833438</span><span class="p">,</span>
<span class="linenos"> 5</span><span class="w">  </span><span class="nt">&quot;alt&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">28.3</span><span class="p">,</span>
<span class="linenos"> 6</span><span class="w">  </span><span class="nt">&quot;heading&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">359</span><span class="p">,</span>
<span class="linenos"> 7</span><span class="w">  </span><span class="nt">&quot;agl&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">-1</span><span class="p">,</span>
<span class="linenos"> 8</span><span class="w">  </span><span class="nt">&quot;vel_n&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">2.2</span><span class="p">,</span>
<span class="linenos"> 9</span><span class="w">  </span><span class="nt">&quot;vel_e&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="linenos">10</span><span class="w">  </span><span class="nt">&quot;vel_d&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">-1.1</span><span class="p">,</span>
<span class="linenos">11</span><span class="w">  </span><span class="nt">&quot;gnss_state&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span>
<span class="linenos">12</span><span class="w">  </span><span class="nt">&quot;flight_state&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;landed&quot;</span>
<span class="linenos">13</span><span class="p">}</span>
</pre></div>
</div>
</div>
<dl class="simple">
<dt><strong>Nack reasons:</strong></dt><dd><ul class="simple">
<li><p>None</p></li>
</ul>
</dd>
</dl>
</section>
<section id="fcn-set-init-point">
<span id="fcnsetinitpoint"></span><h3><span class="section-number">2.3.10. </span>Fcn: <code class="docutils literal notranslate"><span class="pre">set_init_point</span></code><a class="headerlink" href="#fcn-set-init-point" title="Permalink to this heading">¶</a></h3>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><img alt="_images/ArduPilot-not_implemented-lightgrey.png" src="_images/ArduPilot-not_implemented-lightgrey.png" />
</td>
<td><img alt="_images/DJI-verified-brightgreen.png" src="_images/DJI-verified-brightgreen.png" />
</td>
<td><img alt="_images/py--client-verified-brightgreen.png" src="_images/py--client-verified-brightgreen.png" />
</td>
</tr>
</tbody>
</table>
<p>The function <code class="docutils literal notranslate"><span class="pre">set_init_point</span></code> saves the current position and heading
as a reference for the local coordinate systems NED and XYZ. Refer to
coordinate system definitions <a class="reference internal" href="#coordinatesystems"><span class="std std-ref">Coordinate systems</span></a>. The message
contains a key <code class="docutils literal notranslate"><span class="pre">heading_ref</span></code> defining how the the X-axis should be
defined. Set heading_ref to “drone” for using current drone heading as
reference or “camera” to use current camera heading as reference. It
is recommended to let the position stabilize before calling this function.
The init point is fixed, it can only be set once be changed.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The Drone Safety System prohibits take-off if the init point is not set. However, if the drone is controlled by PILOT, the DSS will issue <code class="docutils literal notranslate"><span class="pre">set_init_point</span></code> with key “heading_ref” set to “drone” when the take-off command is executed.</p>
</div>
<div class="literal-block-wrapper docutils container" id="id22">
<div class="code-block-caption"><span class="caption-text">Function call: <code class="docutils literal notranslate"><span class="pre">set_init_point</span></code></span><a class="headerlink" href="#id22" title="Permalink to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="p">{</span>
<span class="linenos">2</span><span class="w">  </span><span class="nt">&quot;fcn&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;set_init_point&quot;</span><span class="p">,</span>
<span class="linenos">3</span><span class="w">  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;requestor id&gt;&quot;</span><span class="p">,</span>
<span class="linenos">4</span><span class="w">  </span><span class="nt">&quot;heading_ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;camera&quot;</span>
<span class="linenos">5</span><span class="p">}</span>
</pre></div>
</div>
</div>
<dl class="simple">
<dt><strong>Nack reasons:</strong></dt><dd><ul class="simple">
<li><p>Requester (<code class="docutils literal notranslate"><span class="pre">id</span></code>) is not the DSS owner</p></li>
<li><p>Navigation not ready</p></li>
<li><p>Init point already set</p></li>
<li><p>Gimbal yaw not readable</p></li>
</ul>
</dd>
</dl>
</section>
<section id="fcn-reset-dss-srtl">
<span id="fcnresetdsssrtl"></span><h3><span class="section-number">2.3.11. </span>Fcn: <code class="docutils literal notranslate"><span class="pre">reset_dss_srtl</span></code><a class="headerlink" href="#fcn-reset-dss-srtl" title="Permalink to this heading">¶</a></h3>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><img alt="_images/ArduPilot-not_implemented-lightgrey.png" src="_images/ArduPilot-not_implemented-lightgrey.png" />
</td>
<td><img alt="_images/DJI-verified-brightgreen.png" src="_images/DJI-verified-brightgreen.png" />
</td>
<td><img alt="_images/py--client-verified-brightgreen.png" src="_images/py--client-verified-brightgreen.png" />
</td>
</tr>
</tbody>
</table>
<p>The function <code class="docutils literal notranslate"><span class="pre">reset_dss_srtl</span></code> resets the DSS SRTL stack and takes
the current postion as the final position for the DSS SRTL mission.
Hence, the drone will engage landing from this point. The drone must
have a safe altitude when the command is issued, otherwise the
approach will not be safe. If the current altitude is lower than 2m,
the altitude will be set to 2m.</p>
<div class="literal-block-wrapper docutils container" id="id23">
<div class="code-block-caption"><span class="caption-text">Function call: <code class="docutils literal notranslate"><span class="pre">reset_dss_srtl</span></code></span><a class="headerlink" href="#id23" title="Permalink to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="p">{</span>
<span class="linenos">2</span><span class="w">  </span><span class="nt">&quot;fcn&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;reset_dss_srtl&quot;</span><span class="p">,</span>
<span class="linenos">3</span><span class="w">  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;requestor id&gt;&quot;</span>
<span class="linenos">4</span><span class="p">}</span>
</pre></div>
</div>
</div>
<dl class="simple">
<dt><strong>Nack reasons:</strong></dt><dd><ul class="simple">
<li><p>Requester (<code class="docutils literal notranslate"><span class="pre">id</span></code>) is not the DSS owner</p></li>
<li><p>Navigation not ready</p></li>
</ul>
</dd>
</dl>
</section>
<section id="fcn-arm-take-off">
<span id="fcnarmtakeoff"></span><h3><span class="section-number">2.3.12. </span>Fcn: <code class="docutils literal notranslate"><span class="pre">arm_take_off</span></code><a class="headerlink" href="#fcn-arm-take-off" title="Permalink to this heading">¶</a></h3>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><img alt="_images/ArduPilot-not_implemented-lightgrey.png" src="_images/ArduPilot-not_implemented-lightgrey.png" />
</td>
<td><img alt="_images/DJI-verified-brightgreen.png" src="_images/DJI-verified-brightgreen.png" />
</td>
<td><img alt="_images/py--client-verified-brightgreen.png" src="_images/py--client-verified-brightgreen.png" />
</td>
</tr>
</tbody>
</table>
<p>The function <code class="docutils literal notranslate"><span class="pre">arm_take_off</span></code> arms the vehicle if possible and
executes a takeoff command to the height specified in key <code class="docutils literal notranslate"><span class="pre">height</span></code>
[m]. The function does not report when take-off is completed,
application must monitor the altitude until target height is reached.
The height is relative to current position (ground) and height
argument must be between 2m and 40m. When the drone reaches the target
height, the corresponding position will be added as the first waypoint
in the list of waypoints used by the DSS SRTL, i.e. the last waypoint
to visit,.</p>
<div class="literal-block-wrapper docutils container" id="id24">
<div class="code-block-caption"><span class="caption-text">Function call: <code class="docutils literal notranslate"><span class="pre">arm_take_off</span></code></span><a class="headerlink" href="#id24" title="Permalink to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="p">{</span>
<span class="linenos">2</span><span class="w">  </span><span class="nt">&quot;fcn&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;arm_take_off&quot;</span><span class="p">,</span>
<span class="linenos">3</span><span class="w">  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;requestor id&gt;&quot;</span><span class="p">,</span>
<span class="linenos">4</span><span class="w">  </span><span class="nt">&quot;height&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span>
<span class="linenos">5</span><span class="p">}</span>
</pre></div>
</div>
</div>
<dl class="simple">
<dt><strong>Nack reasons:</strong></dt><dd><ul class="simple">
<li><p>Requester (<code class="docutils literal notranslate"><span class="pre">id</span></code>) is not the DSS owner</p></li>
<li><p>Application is not in controls</p></li>
<li><p>Less than 8 satellites</p></li>
<li><p>State is flying</p></li>
<li><p>Height is out of limits</p></li>
<li><p>Init point not set</p></li>
</ul>
</dd>
</dl>
</section>
<section id="fcn-land">
<span id="fcnland"></span><h3><span class="section-number">2.3.13. </span>Fcn: <code class="docutils literal notranslate"><span class="pre">land</span></code><a class="headerlink" href="#fcn-land" title="Permalink to this heading">¶</a></h3>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><img alt="_images/ArduPilot-not_implemented-lightgrey.png" src="_images/ArduPilot-not_implemented-lightgrey.png" />
</td>
<td><img alt="_images/DJI-verified-brightgreen.png" src="_images/DJI-verified-brightgreen.png" />
</td>
<td><img alt="_images/py--client-verified-brightgreen.png" src="_images/py--client-verified-brightgreen.png" />
</td>
</tr>
</tbody>
</table>
<p>The function land commands the drone to stop and land. The function
will not report when landing is completed. The application can monitor
the landing complete by calling <a class="reference internal" href="#getarmed"><span class="std std-ref">Fcn: get_armed</span></a>.</p>
<div class="literal-block-wrapper docutils container" id="id25">
<div class="code-block-caption"><span class="caption-text">Function call: <code class="docutils literal notranslate"><span class="pre">land</span></code></span><a class="headerlink" href="#id25" title="Permalink to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="p">{</span>
<span class="linenos">2</span><span class="w">  </span><span class="nt">&quot;fcn&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;land&quot;</span><span class="p">,</span>
<span class="linenos">3</span><span class="w">  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;requestor id&gt;&quot;</span>
<span class="linenos">4</span><span class="p">}</span>
</pre></div>
</div>
</div>
<dl class="simple">
<dt><strong>Nack reasons:</strong></dt><dd><ul class="simple">
<li><p>Requester is not the DSS owner</p></li>
<li><p>Application is not in controls</p></li>
<li><p>Not flying</p></li>
</ul>
</dd>
</dl>
</section>
<section id="fcn-rtl">
<span id="fcnrtl"></span><h3><span class="section-number">2.3.14. </span>Fcn: <code class="docutils literal notranslate"><span class="pre">rtl</span></code><a class="headerlink" href="#fcn-rtl" title="Permalink to this heading">¶</a></h3>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><img alt="_images/ArduPilot-not_implemented-lightgrey.png" src="_images/ArduPilot-not_implemented-lightgrey.png" />
</td>
<td><img alt="_images/DJI-verified-brightgreen.png" src="_images/DJI-verified-brightgreen.png" />
</td>
<td><img alt="_images/py--client-verified-brightgreen.png" src="_images/py--client-verified-brightgreen.png" />
</td>
</tr>
</tbody>
</table>
<p>The function rtl commands the drone to engage the autopilot
implementation of RTL.</p>
<div class="literal-block-wrapper docutils container" id="id26">
<div class="code-block-caption"><span class="caption-text">Function call: <code class="docutils literal notranslate"><span class="pre">rtl</span></code></span><a class="headerlink" href="#id26" title="Permalink to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="p">{</span>
<span class="linenos">2</span><span class="w">  </span><span class="nt">&quot;fcn&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;rtl&quot;</span><span class="p">,</span>
<span class="linenos">3</span><span class="w">  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;requestor id&gt;&quot;</span>
<span class="linenos">4</span><span class="p">}</span>
</pre></div>
</div>
</div>
<dl class="simple">
<dt><strong>Nack reasons:</strong></dt><dd><ul class="simple">
<li><p>Requester is not the DSS owner</p></li>
<li><p>Application is not in controls</p></li>
<li><p>Not flying</p></li>
<li><p>RTL failed to engage, try again</p></li>
</ul>
</dd>
</dl>
</section>
<section id="fcn-dss-srtl">
<span id="fcndsssrtl"></span><h3><span class="section-number">2.3.15. </span>Fcn: <code class="docutils literal notranslate"><span class="pre">dss_srtl</span></code><a class="headerlink" href="#fcn-dss-srtl" title="Permalink to this heading">¶</a></h3>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><img alt="_images/ArduPilot-not_implemented-lightgrey.png" src="_images/ArduPilot-not_implemented-lightgrey.png" />
</td>
<td><img alt="_images/DJI-verified-brightgreen.png" src="_images/DJI-verified-brightgreen.png" />
</td>
<td><img alt="_images/py--client-verified-brightgreen.png" src="_images/py--client-verified-brightgreen.png" />
</td>
</tr>
</tbody>
</table>
<p>The function <code class="docutils literal notranslate"><span class="pre">dss_srtl</span></code> commands the drone to engage the DSS Smart
RTL Mission. Each tracked waypoint is added to the DSS smart RTL list.
When this function is called, the waypoints in the smart RTL list will
be visited in reverse order and the drone will finally reach the
recovery location, i.e. the position where <a class="reference internal" href="#fcnresetdsssrtl"><span class="std std-ref">Fcn: reset_dss_srtl</span></a> was
last called. At the recovery location the drone will hover the time
specified as an integer in key <code class="docutils literal notranslate"><span class="pre">hover_time</span></code> [s], then proceed with
landing and disarming. Valid range for hover time is 0-300s.</p>
<div class="literal-block-wrapper docutils container" id="id27">
<div class="code-block-caption"><span class="caption-text">Function call: <code class="docutils literal notranslate"><span class="pre">dss_srtl</span></code></span><a class="headerlink" href="#id27" title="Permalink to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="p">{</span>
<span class="linenos">2</span><span class="w">  </span><span class="nt">&quot;fcn&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;dss_srtl&quot;</span><span class="p">,</span>
<span class="linenos">3</span><span class="w">  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;requestor id&gt;&quot;</span><span class="p">,</span>
<span class="linenos">4</span><span class="w">  </span><span class="nt">&quot;hover_time&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span>
<span class="linenos">5</span><span class="p">}</span>
</pre></div>
</div>
</div>
<dl class="simple">
<dt><strong>Nack reasons:</strong></dt><dd><ul class="simple">
<li><p>Requester is not the DSS owner</p></li>
<li><p>Application is not in controls</p></li>
<li><p>Not flying</p></li>
<li><p>Hover_time is out of limits</p></li>
</ul>
</dd>
</dl>
</section>
<section id="fcn-set-vel-body">
<span id="fcnsetvelbody"></span><h3><span class="section-number">2.3.16. </span>Fcn: <code class="docutils literal notranslate"><span class="pre">set_vel_BODY</span></code><a class="headerlink" href="#fcn-set-vel-body" title="Permalink to this heading">¶</a></h3>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><img alt="_images/ArduPilot-not_implemented-lightgrey.png" src="_images/ArduPilot-not_implemented-lightgrey.png" />
</td>
<td><img alt="_images/DJI-verified-brightgreen.png" src="_images/DJI-verified-brightgreen.png" />
</td>
<td><img alt="_images/py--client-verified-brightgreen.png" src="_images/py--client-verified-brightgreen.png" />
</td>
</tr>
</tbody>
</table>
<p>The function <code class="docutils literal notranslate"><span class="pre">set_vel_BODY</span></code> sets the application desired body fixed
velocities for 2 seconds. If no new commands are sent within 2 seconds
the drone will stop and hover. The drone coordinate system is defined
such that <cite>x</cite> points forwards, <cite>y</cite> points to the right and <cite>z</cite> points
downwards. Velocities are given as a double and set in [m/s] and
<code class="docutils literal notranslate"><span class="pre">yaw_rate</span></code> as a double in [deg/s]. The Drone Safety System analyses and follows
the desired velocities when appropriate, while ensuring safe
operations of the drone.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Positive z values corresponds to a descent.</p>
</div>
<div class="literal-block-wrapper docutils container" id="id28">
<div class="code-block-caption"><span class="caption-text">Function call: <code class="docutils literal notranslate"><span class="pre">set_vel_BODY</span></code></span><a class="headerlink" href="#id28" title="Permalink to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="p">{</span>
<span class="linenos">2</span><span class="w">  </span><span class="nt">&quot;fcn&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;set_vel_BODY&quot;</span><span class="p">,</span>
<span class="linenos">3</span><span class="w">  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;requestor id&gt;&quot;</span><span class="p">,</span>
<span class="linenos">4</span><span class="w">  </span><span class="nt">&quot;x&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="linenos">5</span><span class="w">  </span><span class="nt">&quot;y&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="linenos">6</span><span class="w">  </span><span class="nt">&quot;z&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="linenos">7</span><span class="w">  </span><span class="nt">&quot;yaw_rate&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span>
<span class="linenos">8</span><span class="p">}</span>
</pre></div>
</div>
</div>
<dl class="simple">
<dt><strong>Nack reasons:</strong></dt><dd><ul class="simple">
<li><p>Requester is not the DSS owner</p></li>
<li><p>Application is not in controls</p></li>
<li><p>Not flying</p></li>
</ul>
</dd>
</dl>
</section>
<section id="fcn-set-heading">
<span id="setheading"></span><h3><span class="section-number">2.3.17. </span>Fcn: <code class="docutils literal notranslate"><span class="pre">set_heading</span></code><a class="headerlink" href="#fcn-set-heading" title="Permalink to this heading">¶</a></h3>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><img alt="_images/ArduPilot-not_implemented-lightgrey.png" src="_images/ArduPilot-not_implemented-lightgrey.png" />
</td>
<td><img alt="_images/DJI-verified-brightgreen.png" src="_images/DJI-verified-brightgreen.png" />
</td>
<td><img alt="_images/py--client-verified-brightgreen.png" src="_images/py--client-verified-brightgreen.png" />
</td>
</tr>
</tbody>
</table>
<p>The function <code class="docutils literal notranslate"><span class="pre">set_heading</span></code> sets the application desired heading
specified as a double in the key <code class="docutils literal notranslate"><span class="pre">heading</span></code> [deg] relative to true
north. Valid range is [0-360[. This action is implemented by sending a
waypoint to the autopilot at the current location with the specified
heading.</p>
<div class="literal-block-wrapper docutils container" id="id29">
<div class="code-block-caption"><span class="caption-text">Function call: <code class="docutils literal notranslate"><span class="pre">set_heading</span></code></span><a class="headerlink" href="#id29" title="Permalink to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="p">{</span>
<span class="linenos">2</span><span class="w">  </span><span class="nt">&quot;fcn&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;set_heading&quot;</span><span class="p">,</span>
<span class="linenos">3</span><span class="w">  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;requestor id&gt;&quot;</span><span class="p">,</span>
<span class="linenos">4</span><span class="w">  </span><span class="nt">&quot;heading&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span>
<span class="linenos">5</span><span class="p">}</span>
</pre></div>
</div>
</div>
<dl class="simple">
<dt><strong>Nack reasons:</strong></dt><dd><ul class="simple">
<li><p>Requester is not the DSS owner</p></li>
<li><p>Application is not in controls</p></li>
<li><p>Not flying</p></li>
<li><p>Heading is out of limits</p></li>
<li><p>Mission is active</p></li>
</ul>
</dd>
</dl>
</section>
<section id="fcn-set-alt">
<h3><span class="section-number">2.3.18. </span>Fcn: <code class="docutils literal notranslate"><span class="pre">set_alt</span></code><a class="headerlink" href="#fcn-set-alt" title="Permalink to this heading">¶</a></h3>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><img alt="_images/ArduPilot-not_implemented-lightgrey.png" src="_images/ArduPilot-not_implemented-lightgrey.png" />
</td>
<td><img alt="_images/DJI-verified-brightgreen.png" src="_images/DJI-verified-brightgreen.png" />
</td>
<td><img alt="_images/py--client-verified-brightgreen.png" src="_images/py--client-verified-brightgreen.png" />
</td>
</tr>
</tbody>
</table>
<p>The function <code class="docutils literal notranslate"><span class="pre">set_alt</span></code> sets the application desired altitude specified as a
double in the key <code class="docutils literal notranslate"><span class="pre">alt</span></code> [m] with <code class="docutils literal notranslate"><span class="pre">reference</span></code> “init” or “AMSL”. Altitude must
be at least 2m higher than take-off location. This action is implemented by
sending a waypoint to the autopilot at the current location with the specified
altitude.</p>
<div class="literal-block-wrapper docutils container" id="id30">
<div class="code-block-caption"><span class="caption-text">Function call: <code class="docutils literal notranslate"><span class="pre">set_alt</span></code></span><a class="headerlink" href="#id30" title="Permalink to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="p">{</span>
<span class="linenos">2</span><span class="w">  </span><span class="nt">&quot;fcn&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;set_alt&quot;</span><span class="p">,</span>
<span class="linenos">3</span><span class="w">  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;requestor id&gt;&quot;</span><span class="p">,</span>
<span class="linenos">4</span><span class="w">  </span><span class="nt">&quot;alt&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span>
<span class="linenos">5</span><span class="w">  </span><span class="nt">&quot;reference&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;init&quot;</span>
<span class="linenos">6</span><span class="p">}</span>
</pre></div>
</div>
</div>
<dl class="simple">
<dt><strong>Nack reasons:</strong></dt><dd><ul class="simple">
<li><p>Requester is not the DSS owner</p></li>
<li><p>Application is not in controls</p></li>
<li><p>Not flying</p></li>
<li><p>Alt is out of limits</p></li>
<li><p>Mission is active</p></li>
</ul>
</dd>
</dl>
</section>
<section id="fcn-set-default-speed">
<span id="fcnsetdefaultspeed"></span><h3><span class="section-number">2.3.19. </span>Fcn: <code class="docutils literal notranslate"><span class="pre">set_default_speed</span></code><a class="headerlink" href="#fcn-set-default-speed" title="Permalink to this heading">¶</a></h3>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><img alt="_images/ArduPilot-not_implemented-lightgrey.png" src="_images/ArduPilot-not_implemented-lightgrey.png" />
</td>
<td><img alt="_images/DJI-not_implemented-lightgrey.png" src="_images/DJI-not_implemented-lightgrey.png" />
</td>
</tr>
</tbody>
</table>
<p>The function <code class="docutils literal notranslate"><span class="pre">set_default_speed</span></code> sets the default speed according to
the value of the key <code class="docutils literal notranslate"><span class="pre">default_speed</span></code> [m/s]. The Drone Safety System will apply the
default speed if the optional argument <code class="docutils literal notranslate"><span class="pre">speed</span></code> is missing in a
mission.</p>
<div class="literal-block-wrapper docutils container" id="id31">
<div class="code-block-caption"><span class="caption-text">Function call: <code class="docutils literal notranslate"><span class="pre">set_default_speed</span></code></span><a class="headerlink" href="#id31" title="Permalink to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="p">{</span>
<span class="linenos">2</span><span class="w">  </span><span class="nt">&quot;fcn&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;set_default_speed&quot;</span><span class="p">,</span>
<span class="linenos">3</span><span class="w">  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;requestor id&gt;&quot;</span><span class="p">,</span>
<span class="linenos">4</span><span class="w">  </span><span class="nt">&quot;default_speed&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span>
<span class="linenos">5</span><span class="p">}</span>
</pre></div>
</div>
</div>
<dl class="simple">
<dt><strong>Nack reasons:</strong></dt><dd><ul class="simple">
<li><p>Requester is not the DSS owner</p></li>
<li><p>Default speed is out of DSS limits</p></li>
</ul>
</dd>
</dl>
</section>
<section id="fcn-upload-mission-lla">
<span id="fcnupload-mission-lla"></span><h3><span class="section-number">2.3.20. </span>Fcn: <code class="docutils literal notranslate"><span class="pre">upload_mission_LLA</span></code><a class="headerlink" href="#fcn-upload-mission-lla" title="Permalink to this heading">¶</a></h3>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><img alt="_images/ArduPilot-not_implemented-lightgrey.png" src="_images/ArduPilot-not_implemented-lightgrey.png" />
</td>
<td><img alt="_images/DJI-verified-brightgreen.png" src="_images/DJI-verified-brightgreen.png" />
</td>
<td><img alt="_images/py--client-verified-brightgreen.png" src="_images/py--client-verified-brightgreen.png" />
</td>
</tr>
</tbody>
</table>
<p>The function <code class="docutils literal notranslate"><span class="pre">upload_mission_LLA</span></code> uploads a sequence of waypoints
given in the LLA coordinate system - degrees latitude, longitude and
meters altitude AMSL (above mean sea level). The uploaded mission is
stored as a pending mission, and any current pending mission is
overwritten. (independent on reference frame LLA/NED/XYZ).</p>
<p>Each waypoint has an incremental id depending on the waypoint’s
position in the waypoint list. First waypoint has id 0, second has id
1 etc. If a mission does not fulfil this criteria it will be rejected.</p>
<p>A minimal mission consists of 1 wp, maximum number of waypoints is not
limited but not tested.</p>
<p>The heading of the vehicle is specified in the key <code class="docutils literal notranslate"><span class="pre">heading</span></code> [deg]
relative to true north, valid range is [0-360[. Alternatively, the
<code class="docutils literal notranslate"><span class="pre">heading</span></code> can be set to the string <code class="docutils literal notranslate"><span class="pre">&quot;course&quot;</span></code> to have the drone
pointing to the waypoint as it approaches. Course is calculated as the
bearing from the current position to the target position.</p>
<p>The key <code class="docutils literal notranslate"><span class="pre">action</span></code> is optional and supports take_photo and the
additional optional key <code class="docutils literal notranslate"><span class="pre">gimbal_pitch</span></code>.</p>
<p>The key <code class="docutils literal notranslate"><span class="pre">speed</span></code> is optional, if excluded vehicle will use the
default speed set in function <a class="reference internal" href="#fcnsetdefaultspeed"><span class="std std-ref">Fcn: set_default_speed</span></a>.</p>
<p>A mission can be uploaded at any time, even if a mission is already
under execution. The uploaded mission is activated by calling
<a class="reference internal" href="#fcngogo"><span class="std std-ref">Fcn: gogo</span></a>.</p>
<div class="literal-block-wrapper docutils container" id="id32">
<div class="code-block-caption"><span class="caption-text">Function call: <code class="docutils literal notranslate"><span class="pre">upload_mission_LLA</span></code></span><a class="headerlink" href="#id32" title="Permalink to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="p">{</span>
<span class="linenos"> 2</span><span class="w">  </span><span class="nt">&quot;fcn&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;upload_mission_LLA&quot;</span><span class="p">,</span>
<span class="linenos"> 3</span><span class="w">  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;requestor id&gt;&quot;</span><span class="p">,</span>
<span class="linenos"> 4</span><span class="w">  </span><span class="nt">&quot;mission&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="linenos"> 5</span><span class="w">    </span><span class="nt">&quot;id0&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="linenos"> 6</span><span class="w">      </span><span class="nt">&quot;lat&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">59.81138609219151</span><span class="p">,</span>
<span class="linenos"> 7</span><span class="w">      </span><span class="nt">&quot;lon&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">17.654357714443147</span><span class="p">,</span>
<span class="linenos"> 8</span><span class="w">      </span><span class="nt">&quot;alt&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">58</span><span class="p">,</span>
<span class="linenos"> 9</span><span class="w">      </span><span class="nt">&quot;heading&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;course&quot;</span><span class="p">,</span>
<span class="linenos">10</span><span class="w">      </span><span class="nt">&quot;speed&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span>
<span class="linenos">11</span><span class="w">      </span><span class="nt">&quot;action&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;take_photo&quot;</span><span class="p">,</span>
<span class="linenos">12</span><span class="w">      </span><span class="nt">&quot;gimbal_pitch&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">-45</span>
<span class="linenos">13</span><span class="w">    </span><span class="p">},</span>
<span class="linenos">14</span><span class="w">    </span><span class="nt">&quot;id1&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">15</span><span class="w">      </span><span class="nt">&quot;lat&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">59.81194802311458</span><span class="p">,</span>
<span class="linenos">16</span><span class="w">      </span><span class="nt">&quot;lon&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">17.65435771534038</span><span class="p">,</span>
<span class="linenos">17</span><span class="w">      </span><span class="nt">&quot;alt&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">59</span><span class="p">,</span>
<span class="linenos">18</span><span class="w">      </span><span class="nt">&quot;heading&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">180</span>
<span class="linenos">19</span><span class="w">    </span><span class="p">}</span>
<span class="linenos">20</span><span class="w">  </span><span class="p">}</span>
<span class="linenos">21</span><span class="p">}</span>
</pre></div>
</div>
</div>
<dl class="simple">
<dt><strong>Nack reasons:</strong></dt><dd><ul class="simple">
<li><p>Requester is not the DSS owner</p></li>
<li><p>Init point is not set</p></li>
<li><p>Geofence violation, &lt;wp id&gt;</p></li>
<li><p>Wp numbering faulty, missing &lt;wp id&gt;</p></li>
<li><p>WP action not supported, &lt;wp id&gt;</p></li>
<li><p>Speed below 0.1, &lt;wp id&gt;</p></li>
<li><p>Heading faulty, &lt;wp id&gt;</p></li>
</ul>
</dd>
</dl>
</section>
<section id="fcn-upload-mission-ned">
<span id="fcnupload-mission-ned"></span><h3><span class="section-number">2.3.21. </span>Fcn: <code class="docutils literal notranslate"><span class="pre">upload_mission_NED</span></code><a class="headerlink" href="#fcn-upload-mission-ned" title="Permalink to this heading">¶</a></h3>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><img alt="_images/ArduPilot-not_implemented-lightgrey.png" src="_images/ArduPilot-not_implemented-lightgrey.png" />
</td>
<td><img alt="_images/DJI-verified-brightgreen.png" src="_images/DJI-verified-brightgreen.png" />
</td>
<td><img alt="_images/py--client-verified-brightgreen.png" src="_images/py--client-verified-brightgreen.png" />
</td>
</tr>
</tbody>
</table>
<p>The function <code class="docutils literal notranslate"><span class="pre">upload_mission_NED</span></code> uploads a sequence of waypoints given
in the NED coordinate system - meters North, East, Down relative to
the point of init, refer to <a class="reference internal" href="#fcnsetinitpoint"><span class="std std-ref">Fcn: set_init_point</span></a>. The uploaded
mission is stored the a pending mission any current pending mission is
overwritten (independent on reference frame LLA/NED/XYZ).</p>
<p>Each waypoint has an incremental id depending on the waypoint’s
position in the waypoint list. First waypoint has id 0, second has id
1 etc. If a mission does not fulfil this criteria it will be
rejected.</p>
<p>A minimal mission consists of 1 wp, maximum number of waypoints is not
limited but not tested yet.</p>
<p>The heading of the vehicle is specified in the key <code class="docutils literal notranslate"><span class="pre">heading</span></code> [deg]
relative to true north, valid range is [0-360[. Alternatively, the
<code class="docutils literal notranslate"><span class="pre">heading</span></code> can be set to the string <code class="docutils literal notranslate"><span class="pre">&quot;course&quot;</span></code> to have the drone
pointing to the waypoint as it approaches. Course is calculated as the
bearing from the current position to the target position.</p>
<p>The key <code class="docutils literal notranslate"><span class="pre">action</span></code> is optional and supports take_photo and the
additional optional key <code class="docutils literal notranslate"><span class="pre">gimbal_pitch</span></code>.</p>
<p>The key <code class="docutils literal notranslate"><span class="pre">speed</span></code> is optional, if excluded vehicle will use the
default speed set in function <a class="reference internal" href="#fcnsetdefaultspeed"><span class="std std-ref">Fcn: set_default_speed</span></a>.</p>
<p>A mission can be uploaded at any time, even if a mission is already
under execution. The uploaded mission is activated by calling
<a class="reference internal" href="#fcngogo"><span class="std std-ref">Fcn: gogo</span></a>.</p>
<div class="literal-block-wrapper docutils container" id="id33">
<div class="code-block-caption"><span class="caption-text">Function call: <code class="docutils literal notranslate"><span class="pre">upload_mission_NED</span></code></span><a class="headerlink" href="#id33" title="Permalink to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="p">{</span>
<span class="linenos"> 2</span><span class="w">  </span><span class="nt">&quot;fcn&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;upload_mission_NED&quot;</span><span class="p">,</span>
<span class="linenos"> 3</span><span class="w">  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;requestor id&gt;&quot;</span><span class="p">,</span>
<span class="linenos"> 4</span><span class="w">  </span><span class="nt">&quot;mission&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="linenos"> 5</span><span class="w">    </span><span class="nt">&quot;id0&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="linenos"> 6</span><span class="w">      </span><span class="nt">&quot;north&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span>
<span class="linenos"> 7</span><span class="w">      </span><span class="nt">&quot;east&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span>
<span class="linenos"> 8</span><span class="w">      </span><span class="nt">&quot;down&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">-15</span><span class="p">,</span>
<span class="linenos"> 9</span><span class="w">      </span><span class="nt">&quot;heading&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;course&quot;</span><span class="p">,</span>
<span class="linenos">10</span><span class="w">      </span><span class="nt">&quot;action&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;take_photo&quot;</span><span class="p">,</span>
<span class="linenos">11</span><span class="w">      </span><span class="nt">&quot;gimbal_pitch&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">-45</span>
<span class="linenos">12</span><span class="w">    </span><span class="p">},</span>
<span class="linenos">13</span><span class="w">    </span><span class="nt">&quot;id1&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">14</span><span class="w">      </span><span class="nt">&quot;north&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span>
<span class="linenos">15</span><span class="w">      </span><span class="nt">&quot;east&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">-20</span><span class="p">,</span>
<span class="linenos">16</span><span class="w">      </span><span class="nt">&quot;down&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">-20</span><span class="p">,</span>
<span class="linenos">17</span><span class="w">      </span><span class="nt">&quot;heading&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span>
<span class="linenos">18</span><span class="w">      </span><span class="nt">&quot;speed&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span>
<span class="linenos">19</span><span class="w">    </span><span class="p">}</span>
<span class="linenos">20</span><span class="w">  </span><span class="p">}</span>
<span class="linenos">21</span><span class="p">}</span>
</pre></div>
</div>
</div>
<dl class="simple">
<dt><strong>Nack reasons:</strong></dt><dd><ul class="simple">
<li><p>Requester is not the DSS owner</p></li>
<li><p>Init point is not set</p></li>
<li><p>Geofence violation, &lt;wp id&gt;</p></li>
<li><p>Wp numbering faulty, missing &lt;wp id&gt;</p></li>
<li><p>WP action not supported, &lt;wp id&gt;</p></li>
<li><p>Speed below 0.1, &lt;wp id&gt;</p></li>
<li><p>Heading faulty, &lt;wp id&gt;</p></li>
</ul>
</dd>
</dl>
</section>
<section id="fcn-upload-mission-xyz">
<span id="fcnupload-mission-xyz"></span><h3><span class="section-number">2.3.22. </span>Fcn: <code class="docutils literal notranslate"><span class="pre">upload_mission_XYZ</span></code><a class="headerlink" href="#fcn-upload-mission-xyz" title="Permalink to this heading">¶</a></h3>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><img alt="_images/ArduPilot-not_implemented-lightgrey.png" src="_images/ArduPilot-not_implemented-lightgrey.png" />
</td>
<td><img alt="_images/DJI-verified-brightgreen.png" src="_images/DJI-verified-brightgreen.png" />
</td>
<td><img alt="_images/py--client-verified-brightgreen.png" src="_images/py--client-verified-brightgreen.png" />
</td>
</tr>
</tbody>
</table>
<p>The function <code class="docutils literal notranslate"><span class="pre">upload_mission_XYZ</span></code> uploads a sequence of waypoints
given in the XYZ coordinate system - meters X, Y and Z relative to the
coordinate system origin defined by calling the init function, refer
to <a class="reference internal" href="#fcnsetinitpoint"><span class="std std-ref">Fcn: set_init_point</span></a>. The uploaded mission is stored the a
pending mission any current pending mission is overwritten
(independent on reference frame LLA/NED/XYZ).</p>
<p>Each waypoint has an incremental id depending on the waypoint’s
position in the waypoint list. First waypoint has id 0, second has id
1 etc. If a mission does not fulfill this criteria it will be
rejected.</p>
<p>A minimal mission consists of 1 wp, maximum number of waypoints is not
limited but not tested yet.</p>
<p>The heading of the vehicle is specified in the key <code class="docutils literal notranslate"><span class="pre">heading</span></code> [deg]
relative to coordinate system definition (around z-axis where the
positive x-axis defines heading 0), valid range is [0-360[.
Alternatively, the key <code class="docutils literal notranslate"><span class="pre">heading</span></code> can be set to the string
<code class="docutils literal notranslate"><span class="pre">&quot;course&quot;</span></code> to have the drone pointing to the waypoint as it
approaches. Course is calculated as the bearing from the current
position to the target position.</p>
<p>The key <code class="docutils literal notranslate"><span class="pre">action</span></code> is optional and supports take_photo and the
additional optional key <code class="docutils literal notranslate"><span class="pre">gimbal_pitch</span></code>.</p>
<p>The key <code class="docutils literal notranslate"><span class="pre">speed</span></code> is optional, if excluded vehicle will use the
default speed set in function <a class="reference internal" href="#fcnsetdefaultspeed"><span class="std std-ref">Fcn: set_default_speed</span></a>.</p>
<p>A mission can be uploaded at any time, even if a mission is already
under execution. The uploaded mission is activated by calling
<a class="reference internal" href="#fcngogo"><span class="std std-ref">Fcn: gogo</span></a>.</p>
<div class="literal-block-wrapper docutils container" id="id34">
<div class="code-block-caption"><span class="caption-text">Function call: <code class="docutils literal notranslate"><span class="pre">upload_mission_XYZ</span></code></span><a class="headerlink" href="#id34" title="Permalink to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="p">{</span>
<span class="linenos"> 2</span><span class="w">  </span><span class="nt">&quot;fcn&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;upload_mission_XYZ&quot;</span><span class="p">,</span>
<span class="linenos"> 3</span><span class="w">  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;requestor id&gt;&quot;</span><span class="p">,</span>
<span class="linenos"> 4</span><span class="w">  </span><span class="nt">&quot;mission&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="linenos"> 5</span><span class="w">    </span><span class="nt">&quot;id0&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="linenos"> 6</span><span class="w">      </span><span class="nt">&quot;x&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span>
<span class="linenos"> 7</span><span class="w">      </span><span class="nt">&quot;y&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span>
<span class="linenos"> 8</span><span class="w">      </span><span class="nt">&quot;z&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">-15</span><span class="p">,</span>
<span class="linenos"> 9</span><span class="w">      </span><span class="nt">&quot;heading&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span>
<span class="linenos">10</span><span class="w">      </span><span class="nt">&quot;action&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;take_photo&quot;</span><span class="p">,</span>
<span class="linenos">11</span><span class="w">      </span><span class="nt">&quot;gimbal_pitch&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">-45</span>
<span class="linenos">12</span><span class="w">    </span><span class="p">},</span>
<span class="linenos">13</span><span class="w">    </span><span class="nt">&quot;id1&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">14</span><span class="w">      </span><span class="nt">&quot;x&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span>
<span class="linenos">15</span><span class="w">      </span><span class="nt">&quot;y&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">-20</span><span class="p">,</span>
<span class="linenos">16</span><span class="w">      </span><span class="nt">&quot;z&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">-20</span><span class="p">,</span>
<span class="linenos">17</span><span class="w">      </span><span class="nt">&quot;heading&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;course&quot;</span><span class="p">,</span>
<span class="linenos">18</span><span class="w">      </span><span class="nt">&quot;speed&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="linenos">19</span><span class="w">      </span><span class="nt">&quot;action&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;take_photo&quot;</span>
<span class="linenos">20</span><span class="w">    </span><span class="p">}</span>
<span class="linenos">21</span><span class="w">  </span><span class="p">}</span>
<span class="linenos">22</span><span class="p">}</span>
</pre></div>
</div>
</div>
<dl class="simple">
<dt><strong>Nack reasons:</strong></dt><dd><ul class="simple">
<li><p>Requester is not the DSS owner</p></li>
<li><p>Init point is not set</p></li>
<li><p>Geofence violation, &lt;wp id&gt;</p></li>
<li><p>Wp numbering faulty, missing &lt;wp id&gt;</p></li>
<li><p>WP action not supported, &lt;wp id&gt;</p></li>
<li><p>Speed below 0.1, &lt;wp id&gt;</p></li>
<li><p>Heading faulty, &lt;wp id&gt;</p></li>
</ul>
</dd>
</dl>
</section>
<section id="fcn-gogo">
<span id="fcngogo"></span><h3><span class="section-number">2.3.23. </span>Fcn: <code class="docutils literal notranslate"><span class="pre">gogo</span></code><a class="headerlink" href="#fcn-gogo" title="Permalink to this heading">¶</a></h3>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><img alt="_images/ArduPilot-not_implemented-lightgrey.png" src="_images/ArduPilot-not_implemented-lightgrey.png" />
</td>
<td><img alt="_images/DJI-verified-brightgreen.png" src="_images/DJI-verified-brightgreen.png" />
</td>
<td><img alt="_images/py--client-verified-brightgreen.png" src="_images/py--client-verified-brightgreen.png" />
</td>
</tr>
</tbody>
</table>
<p>The function <cite>gogo</cite> activates a pending mission. The Drone Safety System will start
the mission at the waypoint number set in the key “next_wp”. The drone
will stop at the last way point.</p>
<p>Missions executed by the mission implementation in Drone Safety System, not the
autopilot’s mission features.</p>
<div class="literal-block-wrapper docutils container" id="id35">
<div class="code-block-caption"><span class="caption-text">Function call: <code class="docutils literal notranslate"><span class="pre">gogo</span></code></span><a class="headerlink" href="#id35" title="Permalink to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="p">{</span>
<span class="linenos">2</span><span class="w">  </span><span class="nt">&quot;fcn&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;gogo&quot;</span><span class="p">,</span>
<span class="linenos">3</span><span class="w">  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;requestor id&gt;&quot;</span><span class="p">,</span>
<span class="linenos">4</span><span class="w">  </span><span class="nt">&quot;next_wp&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span>
<span class="linenos">5</span><span class="p">}</span>
</pre></div>
</div>
</div>
<dl class="simple">
<dt>Nack reasons:</dt><dd><ul class="simple">
<li><p>Requester is not the DSS owner</p></li>
<li><p>Application is not in controls</p></li>
<li><p>Not flying</p></li>
<li><p>Wp number is not available in pending mission</p></li>
</ul>
</dd>
</dl>
</section>
<section id="fcn-set-pattern">
<span id="fcnsetpattern"></span><h3><span class="section-number">2.3.24. </span>Fcn: <code class="docutils literal notranslate"><span class="pre">set_pattern</span></code><a class="headerlink" href="#fcn-set-pattern" title="Permalink to this heading">¶</a></h3>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><img alt="_images/ArduPilot-not_implemented-lightgrey.png" src="_images/ArduPilot-not_implemented-lightgrey.png" />
</td>
<td><img alt="_images/DJI-implemented-blue.png" src="_images/DJI-implemented-blue.png" />
</td>
<td><img alt="_images/py--client-implemented-blue.png" src="_images/py--client-implemented-blue.png" />
</td>
</tr>
</tbody>
</table>
<p>The function <code class="docutils literal notranslate"><span class="pre">set_pattern</span></code> loads a flight pattern that can be
applied in <a class="reference internal" href="#follow-stream"><span class="std std-ref">Fcn: follow_stream</span></a>. The pattern describes how the drone
should fly in relation to a reference.</p>
<p><strong>Pattern above</strong></p>
<p>The pattern <code class="docutils literal notranslate"><span class="pre">above</span></code> has a key <code class="docutils literal notranslate"><span class="pre">rel_alt</span></code> [m] for altitude relative
to referene (positive means above reference), and key <code class="docutils literal notranslate"><span class="pre">heading</span></code> that
can be set relative true north ([0-360[) or <code class="docutils literal notranslate"><span class="pre">&quot;course&quot;</span></code> or <code class="docutils literal notranslate"><span class="pre">&quot;poi&quot;</span></code>
for pointing at the reference position. Course is low pass filtered
such as the drone will not update its heading unless the spedd exceeds
1 meter per second.</p>
<div class="literal-block-wrapper docutils container" id="id36">
<div class="code-block-caption"><span class="caption-text">Function call: <code class="docutils literal notranslate"><span class="pre">set_pattern;</span> <span class="pre">above</span></code></span><a class="headerlink" href="#id36" title="Permalink to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="p">{</span>
<span class="linenos">2</span><span class="w">  </span><span class="nt">&quot;fcn&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;set_pattern&quot;</span><span class="p">,</span>
<span class="linenos">3</span><span class="w">  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;requestor id&gt;&quot;</span><span class="p">,</span>
<span class="linenos">4</span><span class="w">  </span><span class="nt">&quot;pattern&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;above&quot;</span><span class="p">,</span>
<span class="linenos">5</span><span class="w">  </span><span class="nt">&quot;rel_alt&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">15</span><span class="p">,</span>
<span class="linenos">6</span><span class="w">  </span><span class="nt">&quot;heading&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;course&quot;</span>
<span class="linenos">7</span><span class="p">}</span>
</pre></div>
</div>
</div>
<dl class="simple">
<dt><strong>Nack reasons:</strong></dt><dd><ul class="simple">
<li><p>Requester is not the DSS owner</p></li>
<li><p>Heading faulty</p></li>
</ul>
</dd>
</dl>
<p><strong>Pattern circle</strong></p>
<p>The pattern <code class="docutils literal notranslate"><span class="pre">circle</span></code> has a key <code class="docutils literal notranslate"><span class="pre">rel_alt</span></code> for altitude relative to
reference (positive means above reference). The key <code class="docutils literal notranslate"><span class="pre">radius</span></code> [m]
determines the horizontal distance from reference.</p>
<p>The key <code class="docutils literal notranslate"><span class="pre">heading</span></code> can be set [0-360[, <code class="docutils literal notranslate"><span class="pre">&quot;course&quot;</span></code>
or <code class="docutils literal notranslate"><span class="pre">&quot;poi&quot;</span></code> for pointing at the reference position.</p>
<p>The key “yaw_rate” [deg/s] sets the desired yaw rate. If the
combination of yaw rate and radius are too big velocity limits will
apply. In this case yaw rate will be limited and radius remain. A
positive yaw rate will result in clockwise circle pattern.</p>
<p>The relation between yaw_rate (<span class="math notranslate nohighlight">\(r\)</span>) and radius (<span class="math notranslate nohighlight">\(R\)</span>)
determines the velocity as follows: <span class="math notranslate nohighlight">\(v=2 \pi rR/360\)</span>, or
approximately <span class="math notranslate nohighlight">\(0.0175rR\)</span>.</p>
<div class="literal-block-wrapper docutils container" id="id37">
<div class="code-block-caption"><span class="caption-text">Function call: <code class="docutils literal notranslate"><span class="pre">set_pattern;</span> <span class="pre">circle</span></code></span><a class="headerlink" href="#id37" title="Permalink to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="p">{</span>
<span class="linenos">2</span><span class="w">  </span><span class="nt">&quot;fcn&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;set_pattern&quot;</span><span class="p">,</span>
<span class="linenos">3</span><span class="w">  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;requestor id&gt;&quot;</span><span class="p">,</span>
<span class="linenos">4</span><span class="w">  </span><span class="nt">&quot;pattern&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;circle&quot;</span><span class="p">,</span>
<span class="linenos">5</span><span class="w">  </span><span class="nt">&quot;rel_alt&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span>
<span class="linenos">6</span><span class="w">  </span><span class="nt">&quot;radius&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span>
<span class="linenos">7</span><span class="w">  </span><span class="nt">&quot;heading&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;poi&quot;</span><span class="p">,</span>
<span class="linenos">8</span><span class="w">  </span><span class="nt">&quot;yaw_rate&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span>
<span class="linenos">9</span><span class="p">}</span>
</pre></div>
</div>
</div>
<dl class="simple">
<dt><strong>Nack reasons:</strong></dt><dd><ul class="simple">
<li><p>Requester is not the DSS owner</p></li>
<li><p>Heading faulty</p></li>
</ul>
</dd>
</dl>
</section>
<section id="fcn-follow-stream">
<span id="follow-stream"></span><h3><span class="section-number">2.3.25. </span>Fcn: <code class="docutils literal notranslate"><span class="pre">follow_stream</span></code><a class="headerlink" href="#fcn-follow-stream" title="Permalink to this heading">¶</a></h3>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><img alt="_images/ArduPilot-not_implemented-lightgrey.png" src="_images/ArduPilot-not_implemented-lightgrey.png" />
</td>
<td><img alt="_images/DJI-implemented-blue.png" src="_images/DJI-implemented-blue.png" />
</td>
<td><img alt="_images/py--client-implemented-blue.png" src="_images/py--client-implemented-blue.png" />
</td>
</tr>
</tbody>
</table>
<p>The function <code class="docutils literal notranslate"><span class="pre">follow_stream</span></code> activates the flight mode follow stream
where the drone follows a reference position with an optional pattern
as offset, refer to <a class="reference internal" href="#fcnsetpattern"><span class="std std-ref">Fcn: set_pattern</span></a>. The stream format is described
in <a class="reference internal" href="#lla"><span class="std std-ref">LLA - Global position data</span></a>. Function follow_stream has a key <code class="docutils literal notranslate"><span class="pre">enable</span></code> to enable
or disable the stream, a key <code class="docutils literal notranslate"><span class="pre">ip</span></code> and <code class="docutils literal notranslate"><span class="pre">port</span></code> for endpoint information to
the LLA-stream to follow. If the stream is not updated during 10
seconds DSS will stop an hover.</p>
<div class="literal-block-wrapper docutils container" id="id38">
<div class="code-block-caption"><span class="caption-text">Function call: <code class="docutils literal notranslate"><span class="pre">follow_stream</span></code></span><a class="headerlink" href="#id38" title="Permalink to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="p">{</span>
<span class="linenos">2</span><span class="w">  </span><span class="nt">&quot;fcn&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;follow_stream&quot;</span><span class="p">,</span>
<span class="linenos">3</span><span class="w">  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;requestor id&gt;&quot;</span><span class="p">,</span>
<span class="linenos">4</span><span class="w">  </span><span class="nt">&quot;enable&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="linenos">5</span><span class="w">  </span><span class="nt">&quot;ip&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;ip of LLA stream&gt;&quot;</span><span class="p">,</span>
<span class="linenos">6</span><span class="w">  </span><span class="nt">&quot;port&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1234</span>
<span class="linenos">7</span><span class="p">}</span>
</pre></div>
</div>
</div>
<dl class="simple">
<dt><strong>Nack reasons:</strong></dt><dd><ul class="simple">
<li><p>Requester is not the DSS owner</p></li>
<li><p>Application is not in controls</p></li>
<li><p>Not flying</p></li>
<li><p>Pattern not set</p></li>
<li><p>Stream already enabled</p></li>
</ul>
</dd>
</dl>
</section>
<section id="fcn-set-gimbal">
<span id="fcnsetgimbal"></span><h3><span class="section-number">2.3.26. </span>Fcn: <code class="docutils literal notranslate"><span class="pre">set_gimbal</span></code><a class="headerlink" href="#fcn-set-gimbal" title="Permalink to this heading">¶</a></h3>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><img alt="_images/ArduPilot-not_implemented-lightgrey.png" src="_images/ArduPilot-not_implemented-lightgrey.png" />
</td>
<td><img alt="_images/DJI-verified-brightgreen.png" src="_images/DJI-verified-brightgreen.png" />
</td>
<td><img alt="_images/py--client-verified-brightgreen.png" src="_images/py--client-verified-brightgreen.png" />
</td>
</tr>
</tbody>
</table>
<p>The function <code class="docutils literal notranslate"><span class="pre">set_gimbal</span></code> commands the gimbal to rotate to the
<code class="docutils literal notranslate"><span class="pre">roll</span></code>, <code class="docutils literal notranslate"><span class="pre">pitch</span></code> and <code class="docutils literal notranslate"><span class="pre">yaw</span></code> angles provided [deg]. Positive roll
is leaning right, positive pitch angles points nose up and increasing
yaw angles rotates the gimbal clockwise. Parameters not supported by
the gimbal in use will just be ignored.</p>
<div class="literal-block-wrapper docutils container" id="id39">
<div class="code-block-caption"><span class="caption-text">Function call: <code class="docutils literal notranslate"><span class="pre">set_gimbal</span></code></span><a class="headerlink" href="#id39" title="Permalink to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="p">{</span>
<span class="linenos">2</span><span class="w">  </span><span class="nt">&quot;fcn&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;set_gimbal&quot;</span><span class="p">,</span>
<span class="linenos">3</span><span class="w">  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="nt">&quot;&lt;requestor id&gt;&quot;</span>
<span class="linenos">4</span><span class="w">  </span><span class="nt">&quot;roll&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="linenos">5</span><span class="w">  </span><span class="nt">&quot;pitch&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">-90</span><span class="p">,</span>
<span class="linenos">6</span><span class="w">  </span><span class="nt">&quot;yaw&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span>
<span class="linenos">7</span><span class="p">}</span>
</pre></div>
</div>
</div>
<dl class="simple">
<dt><strong>Nack reasons:</strong></dt><dd><ul class="simple">
<li><p>Requester is not the DSS owner</p></li>
<li><p>Application is not in controls</p></li>
<li><p>Roll, pitch or yaw is out of range for the gimbal</p></li>
</ul>
</dd>
</dl>
</section>
<section id="fcn-set-gripper">
<span id="fcnsetgripper"></span><h3><span class="section-number">2.3.27. </span>Fcn: <code class="docutils literal notranslate"><span class="pre">set_gripper</span></code><a class="headerlink" href="#fcn-set-gripper" title="Permalink to this heading">¶</a></h3>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><img alt="_images/ArduPilot-not_implemented-lightgrey.png" src="_images/ArduPilot-not_implemented-lightgrey.png" />
</td>
</tr>
</tbody>
</table>
<p>The function <code class="docutils literal notranslate"><span class="pre">set_gripper</span></code> controls the OpenGrap EPM V3 R5C gripper.
The key <code class="docutils literal notranslate"><span class="pre">enable</span></code> indicates if the gripper shall be enabled or not
(True = grab, False = release). Set up the regrab setting in the
autopilot to 15s to ensure strong magnetisation and compliance with
Drone Safety System. Any command sent to the gripper while grabbing or releasing
will be ignored. Drone Safety System will send all gripper commands to the gripper
twice with a 5s delay in between to ensure message is received. If the
gripper is set up over can, the correct can_id must be sent, if set up
via PWM set CAN_ID to 0.</p>
<div class="literal-block-wrapper docutils container" id="id40">
<div class="code-block-caption"><span class="caption-text">Function call: <code class="docutils literal notranslate"><span class="pre">set_gripper</span></code></span><a class="headerlink" href="#id40" title="Permalink to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="p">{</span>
<span class="linenos">2</span><span class="w">  </span><span class="nt">&quot;fcn&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;set_gripper&quot;</span><span class="p">,</span>
<span class="linenos">3</span><span class="w">  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;requestor id&gt;&quot;</span><span class="p">,</span>
<span class="linenos">4</span><span class="w">  </span><span class="nt">&quot;enable&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="linenos">5</span><span class="w">  </span><span class="nt">&quot;CAN_ID&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span>
<span class="linenos">6</span><span class="p">}</span>
</pre></div>
</div>
</div>
<dl class="simple">
<dt><strong>Nack reasons:</strong></dt><dd><ul class="simple">
<li><p>Requester is not the DSS owner</p></li>
<li><p>Application is not in controls</p></li>
<li><p>Other action in execution</p></li>
</ul>
</dd>
</dl>
</section>
<section id="fcn-set-spotlight">
<span id="fcnsetspotlight"></span><h3><span class="section-number">2.3.28. </span>Fcn: <code class="docutils literal notranslate"><span class="pre">set_spotlight</span></code><a class="headerlink" href="#fcn-set-spotlight" title="Permalink to this heading">¶</a></h3>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><img alt="_images/ArduPilot-not_implemented-lightgrey.png" src="_images/ArduPilot-not_implemented-lightgrey.png" />
</td>
</tr>
</tbody>
</table>
<p>The function <code class="docutils literal notranslate"><span class="pre">set_spotlight</span></code> controls the spotlight payload. The key
<code class="docutils literal notranslate"><span class="pre">enable</span></code> indicates if the spotlight shall be enabled or not, the key
<code class="docutils literal notranslate"><span class="pre">brightness</span></code> sets the brightness of the spotlight, valid range is [1 100],
although the brightness will be limited to 50 when on ground, function will
return ack in this case.</p>
<div class="literal-block-wrapper docutils container" id="id41">
<div class="code-block-caption"><span class="caption-text">Function call: <code class="docutils literal notranslate"><span class="pre">set_spotlight</span></code></span><a class="headerlink" href="#id41" title="Permalink to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="p">{</span>
<span class="linenos">2</span><span class="w">  </span><span class="nt">&quot;fcn&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;set_spotlight&quot;</span><span class="p">,</span>
<span class="linenos">3</span><span class="w">  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;requestor id&gt;&quot;</span><span class="p">,</span>
<span class="linenos">4</span><span class="w">  </span><span class="nt">&quot;enable&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="linenos">5</span><span class="w">  </span><span class="nt">&quot;brightness&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span>
<span class="linenos">6</span><span class="p">}</span>
</pre></div>
</div>
</div>
<dl class="simple">
<dt><strong>Nack reasons:</strong></dt><dd><ul class="simple">
<li><p>Requester is not the DSS owner</p></li>
<li><p>Application is not in controls</p></li>
<li><p>Spotlight not available</p></li>
</ul>
</dd>
</dl>
</section>
<section id="fcn-get-spotlight">
<span id="fcngetspotlight"></span><h3><span class="section-number">2.3.29. </span>Fcn: <code class="docutils literal notranslate"><span class="pre">get_spotlight</span></code><a class="headerlink" href="#fcn-get-spotlight" title="Permalink to this heading">¶</a></h3>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><img alt="_images/ArduPilot-not_implemented-lightgrey.png" src="_images/ArduPilot-not_implemented-lightgrey.png" />
</td>
</tr>
</tbody>
</table>
<p>The function <code class="docutils literal notranslate"><span class="pre">get_spotlight</span></code> gets the spotlight payload status. If the
spotligt acessory is available the DSS answers with ack and spotlight status
keys <code class="docutils literal notranslate"><span class="pre">enable</span></code> and <code class="docutils literal notranslate"><span class="pre">brightness</span></code>. If the spotlight accessory is not available,
the DSS will answer with a nack.</p>
<div class="literal-block-wrapper docutils container" id="id42">
<div class="code-block-caption"><span class="caption-text">Function call: <code class="docutils literal notranslate"><span class="pre">get_spotlight</span></code></span><a class="headerlink" href="#id42" title="Permalink to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="p">{</span>
<span class="linenos">2</span><span class="w">  </span><span class="nt">&quot;fcn&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;get_spotlight&quot;</span><span class="p">,</span>
<span class="linenos">3</span><span class="w">  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;requestor id&gt;&quot;</span>
<span class="linenos">4</span><span class="p">}</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id43">
<div class="code-block-caption"><span class="caption-text">Reply: <code class="docutils literal notranslate"><span class="pre">get_spotlight</span></code></span><a class="headerlink" href="#id43" title="Permalink to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="p">{</span>
<span class="linenos">2</span><span class="w">  </span><span class="nt">&quot;fcn&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ack&quot;</span><span class="p">,</span>
<span class="linenos">3</span><span class="w">  </span><span class="nt">&quot;call&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;get_spotlight&quot;</span><span class="p">,</span>
<span class="linenos">4</span><span class="w">  </span><span class="nt">&quot;enable&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="linenos">5</span><span class="w">  </span><span class="nt">&quot;brightness&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span>
<span class="linenos">6</span><span class="p">}</span>
</pre></div>
</div>
</div>
<dl class="simple">
<dt><strong>Nack reasons:</strong></dt><dd><ul class="simple">
<li><p>Spotlight is not available</p></li>
</ul>
</dd>
</dl>
</section>
<section id="fcn-photo">
<span id="fcnphoto"></span><h3><span class="section-number">2.3.30. </span>Fcn: <code class="docutils literal notranslate"><span class="pre">photo</span></code><a class="headerlink" href="#fcn-photo" title="Permalink to this heading">¶</a></h3>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><img alt="_images/ArduPilot-not_implemented-lightgrey.png" src="_images/ArduPilot-not_implemented-lightgrey.png" />
</td>
<td><img alt="_images/DJI-verified-brightgreen.png" src="_images/DJI-verified-brightgreen.png" />
</td>
<td><img alt="_images/py--client-verified-brightgreen.png" src="_images/py--client-verified-brightgreen.png" />
</td>
</tr>
</tbody>
</table>
<p>The function <code class="docutils literal notranslate"><span class="pre">photo</span></code> controls the photo sub-module. The key <code class="docutils literal notranslate"><span class="pre">&quot;cmd&quot;</span></code> can be
set to <code class="docutils literal notranslate"><span class="pre">&quot;take_photo&quot;</span></code>, , <code class="docutils literal notranslate"><span class="pre">&quot;record&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;continous_photo&quot;</span></code> or <code class="docutils literal notranslate"><span class="pre">&quot;download&quot;</span></code>.
Take photo triggers the camera to take a photo with current settings, Record
enables or disables video recording, Continous photo enables or disables a
continous photo session and Download triggers the Drone Safety System to publish the photo(s)
on the DATA-socket.</p>
<p><strong>Take photo</strong></p>
<p>No extra keys.</p>
<div class="literal-block-wrapper docutils container" id="id44">
<div class="code-block-caption"><span class="caption-text">Function call: <code class="docutils literal notranslate"><span class="pre">photo,</span> <span class="pre">take_photo</span></code></span><a class="headerlink" href="#id44" title="Permalink to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="p">{</span>
<span class="linenos">2</span><span class="w">  </span><span class="nt">&quot;fcn&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;photo&quot;</span><span class="p">,</span>
<span class="linenos">3</span><span class="w">  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;requestor id&gt;&quot;</span><span class="p">,</span>
<span class="linenos">4</span><span class="w">  </span><span class="nt">&quot;cmd&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;take_photo&quot;</span>
<span class="linenos">5</span><span class="p">}</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id45">
<div class="code-block-caption"><span class="caption-text">Function response:</span><a class="headerlink" href="#id45" title="Permalink to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="p">{</span>
<span class="linenos">2</span><span class="w">  </span><span class="nt">&quot;fcn&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ack&quot;</span><span class="p">,</span>
<span class="linenos">3</span><span class="w">  </span><span class="nt">&quot;call&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;photo&quot;</span><span class="p">,</span>
<span class="linenos">4</span><span class="w">  </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;take_photo&quot;</span>
<span class="linenos">5</span><span class="p">}</span>
</pre></div>
</div>
</div>
<dl class="simple">
<dt><strong>Nack reasons:</strong></dt><dd><ul class="simple">
<li><p>Requester is not the DSS owner</p></li>
<li><p>Application is not in controls</p></li>
<li><p>Camera resource is busy</p></li>
<li><p>Cmd faulty</p></li>
</ul>
</dd>
</dl>
<p><strong>Record</strong></p>
<p>The record command has one extra key, <code class="docutils literal notranslate"><span class="pre">&quot;enable&quot;</span></code>. Enable is a bool to
enable or disable the recording.</p>
<div class="literal-block-wrapper docutils container" id="id46">
<div class="code-block-caption"><span class="caption-text">Function call: <code class="docutils literal notranslate"><span class="pre">photo,</span> <span class="pre">record</span></code></span><a class="headerlink" href="#id46" title="Permalink to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="p">{</span>
<span class="linenos">2</span><span class="w">  </span><span class="nt">&quot;fcn&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;photo&quot;</span><span class="p">,</span>
<span class="linenos">3</span><span class="w">  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;requestor id&gt;&quot;</span><span class="p">,</span>
<span class="linenos">4</span><span class="w">  </span><span class="nt">&quot;cmd&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;record&quot;</span><span class="p">,</span>
<span class="linenos">5</span><span class="w">  </span><span class="nt">&quot;enable&quot;</span><span class="p">:</span><span class="w">  </span><span class="kc">true</span>
<span class="linenos">6</span><span class="p">}</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id47">
<div class="code-block-caption"><span class="caption-text">Function response:</span><a class="headerlink" href="#id47" title="Permalink to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="p">{</span>
<span class="linenos">2</span><span class="w">  </span><span class="nt">&quot;fcn&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ack&quot;</span><span class="p">,</span>
<span class="linenos">3</span><span class="w">  </span><span class="nt">&quot;call&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;photo&quot;</span><span class="p">,</span>
<span class="linenos">4</span><span class="w">  </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;record - enabled/disabled&quot;</span>
<span class="linenos">5</span><span class="p">}</span>
</pre></div>
</div>
</div>
<dl class="simple">
<dt><strong>Nack reasons:</strong></dt><dd><ul class="simple">
<li><p>Requester is not the DSS owner</p></li>
<li><p>Application is not in controls</p></li>
<li><p>Camera resource is busy</p></li>
<li><p>Cmd faulty</p></li>
</ul>
</dd>
</dl>
<p><strong>Continous photo</strong></p>
<p>The continous photo command has three extra keys, <code class="docutils literal notranslate"><span class="pre">&quot;enable&quot;</span></code>,
<code class="docutils literal notranslate"><span class="pre">&quot;period&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">&quot;publish&quot;</span></code>. Enable is a bool to enable or disable
the contionous photo. Period is a double for setting the desired photo
period in seconds (seconds between photos). Publish is a flag to
trigger the DSS to publish each photo, it can be set to “off”, “low”
or “high” where low and high detemines high or low resolution. If the
period is set lower than the hardware allows for, photos will be taken
as often as possible.</p>
<div class="literal-block-wrapper docutils container" id="id48">
<div class="code-block-caption"><span class="caption-text">Function call: <code class="docutils literal notranslate"><span class="pre">photo,</span> <span class="pre">continous_photo</span></code></span><a class="headerlink" href="#id48" title="Permalink to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="p">{</span>
<span class="linenos">2</span><span class="w">  </span><span class="nt">&quot;fcn&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;photo&quot;</span><span class="p">,</span>
<span class="linenos">3</span><span class="w">  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;requestor id&gt;&quot;</span><span class="p">,</span>
<span class="linenos">4</span><span class="w">  </span><span class="nt">&quot;cmd&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;continous_photo&quot;</span><span class="p">,</span>
<span class="linenos">5</span><span class="w">  </span><span class="nt">&quot;enable&quot;</span><span class="p">:</span><span class="w">  </span><span class="kc">true</span><span class="p">,</span>
<span class="linenos">6</span><span class="w">  </span><span class="nt">&quot;publish&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;low&quot;</span><span class="p">,</span>
<span class="linenos">7</span><span class="w">  </span><span class="nt">&quot;period&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">2.5</span>
<span class="linenos">8</span><span class="p">}</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id49">
<div class="code-block-caption"><span class="caption-text">Function response:</span><a class="headerlink" href="#id49" title="Permalink to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="p">{</span>
<span class="linenos">2</span><span class="w">  </span><span class="nt">&quot;fcn&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ack&quot;</span><span class="p">,</span>
<span class="linenos">3</span><span class="w">  </span><span class="nt">&quot;call&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;photo&quot;</span><span class="p">,</span>
<span class="linenos">4</span><span class="w">  </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;continous_photo - enabled/disabled&quot;</span>
<span class="linenos">5</span><span class="p">}</span>
</pre></div>
</div>
</div>
<dl class="simple">
<dt><strong>Nack reasons:</strong></dt><dd><ul class="simple">
<li><p>Requester is not the DSS owner</p></li>
<li><p>Application is not in controls</p></li>
<li><p>Camera resource is busy</p></li>
<li><p>Cmd faulty</p></li>
</ul>
</dd>
</dl>
<p><strong>Download</strong></p>
<p>The download command has two extra keys, <code class="docutils literal notranslate"><span class="pre">&quot;index&quot;</span></code> and the optional
key <code class="docutils literal notranslate"><span class="pre">&quot;resolution&quot;</span></code> The key <code class="docutils literal notranslate"><span class="pre">&quot;index&quot;</span></code> can be set to an integer for
a specific photo index, “latest” or “all” for all indexes of the
current session. Index relates to an increasing index from that
session and can be identified via function <a class="reference internal" href="#fcngetmetadata"><span class="std std-ref">Fcn: get_metadata</span></a>. The
index is included in the response as a string.</p>
<p>The optional key <code class="docutils literal notranslate"><span class="pre">resolution</span></code> can be set to <code class="docutils literal notranslate"><span class="pre">&quot;high&quot;</span></code> or <code class="docutils literal notranslate"><span class="pre">&quot;low&quot;</span></code>,
high is the default value.</p>
<p>The response is a description string with command and index when
applicable.</p>
<p>The requested file(s) are published on the DATA-socket, refer to
<a class="reference internal" href="#photodownload"><span class="std std-ref">Photo download</span></a></p>
<div class="literal-block-wrapper docutils container" id="id50">
<div class="code-block-caption"><span class="caption-text">Function call: <code class="docutils literal notranslate"><span class="pre">photo,</span> <span class="pre">download</span></code></span><a class="headerlink" href="#id50" title="Permalink to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="p">{</span>
<span class="linenos">2</span><span class="w">  </span><span class="nt">&quot;fcn&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;photo&quot;</span><span class="p">,</span>
<span class="linenos">3</span><span class="w">  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;requestor id&gt;&quot;</span><span class="p">,</span>
<span class="linenos">4</span><span class="w">  </span><span class="nt">&quot;cmd&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;download&quot;</span><span class="p">,</span>
<span class="linenos">5</span><span class="w">  </span><span class="nt">&quot;resolution&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;low&quot;</span><span class="p">,</span>
<span class="linenos">6</span><span class="w">  </span><span class="nt">&quot;index&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;all&quot;</span>
<span class="linenos">7</span><span class="p">}</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id51">
<div class="code-block-caption"><span class="caption-text">Function response:</span><a class="headerlink" href="#id51" title="Permalink to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="p">{</span>
<span class="linenos">2</span><span class="w">  </span><span class="nt">&quot;fcn&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ack&quot;</span><span class="p">,</span>
<span class="linenos">3</span><span class="w">  </span><span class="nt">&quot;call&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;photo&quot;</span><span class="p">,</span>
<span class="linenos">4</span><span class="w">  </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;download &lt;index&gt;&quot;</span>
<span class="linenos">5</span><span class="p">}</span>
</pre></div>
</div>
</div>
<dl class="simple">
<dt><strong>Nack reasons:</strong></dt><dd><ul class="simple">
<li><p>Requester is not the DSS owner</p></li>
<li><p>Application is not in controls</p></li>
<li><p>Camera resource is busy</p></li>
<li><p>Index out of range, &lt;index&gt;</p></li>
<li><p>Index string faulty, &lt;index&gt;</p></li>
<li><p>Cmd faulty</p></li>
</ul>
</dd>
</dl>
</section>
<section id="fcn-get-armed">
<span id="getarmed"></span><h3><span class="section-number">2.3.31. </span>Fcn: <code class="docutils literal notranslate"><span class="pre">get_armed</span></code><a class="headerlink" href="#fcn-get-armed" title="Permalink to this heading">¶</a></h3>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><img alt="_images/ArduPilot-not_implemented-lightgrey.png" src="_images/ArduPilot-not_implemented-lightgrey.png" />
</td>
<td><img alt="_images/DJI-verified-brightgreen.png" src="_images/DJI-verified-brightgreen.png" />
</td>
<td><img alt="_images/py--client-verified-brightgreen.png" src="_images/py--client-verified-brightgreen.png" />
</td>
</tr>
</tbody>
</table>
<p>The function <code class="docutils literal notranslate"><span class="pre">get_armed</span></code> requests the current armed state. The Drone Safety System
replies with a bool indicating the armed state.</p>
<div class="literal-block-wrapper docutils container" id="id52">
<div class="code-block-caption"><span class="caption-text">Function call: <code class="docutils literal notranslate"><span class="pre">get_armed</span></code></span><a class="headerlink" href="#id52" title="Permalink to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="p">{</span>
<span class="linenos">2</span><span class="w">  </span><span class="nt">&quot;fcn&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;get_armed&quot;</span><span class="p">,</span>
<span class="linenos">3</span><span class="w">  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;requestor id&gt;&quot;</span>
<span class="linenos">4</span><span class="p">}</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id53">
<div class="code-block-caption"><span class="caption-text">Function response in case the drone is in armed state</span><a class="headerlink" href="#id53" title="Permalink to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="p">{</span>
<span class="linenos">2</span><span class="w">  </span><span class="nt">&quot;fcn&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ack&quot;</span><span class="p">,</span>
<span class="linenos">3</span><span class="w">  </span><span class="nt">&quot;call&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;get_armed&quot;</span><span class="p">,</span>
<span class="linenos">4</span><span class="w">  </span><span class="nt">&quot;armed&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
<span class="linenos">5</span><span class="p">}</span>
</pre></div>
</div>
</div>
<dl class="simple">
<dt><strong>Nack reasons:</strong></dt><dd><ul class="simple">
<li><p>None</p></li>
</ul>
</dd>
</dl>
</section>
<section id="fcn-get-currentwp">
<span id="getcurrentwp"></span><h3><span class="section-number">2.3.32. </span>Fcn: <code class="docutils literal notranslate"><span class="pre">get_currentWP</span></code><a class="headerlink" href="#fcn-get-currentwp" title="Permalink to this heading">¶</a></h3>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><img alt="_images/ArduPilot-not_implemented-lightgrey.png" src="_images/ArduPilot-not_implemented-lightgrey.png" />
</td>
<td><img alt="_images/DJI-implemented-blue.png" src="_images/DJI-implemented-blue.png" />
</td>
<td><img alt="_images/py--client-not_implemented-lightgrey.png" src="_images/py--client-not_implemented-lightgrey.png" />
</td>
</tr>
</tbody>
</table>
<p>The function <code class="docutils literal notranslate"><span class="pre">get_currentWP</span></code> requests the current WP number, i.e.
the WP number that the drone is flying towards. When the Drone Safety System has
reached the last wp in a mission it will reply <code class="docutils literal notranslate"><span class="pre">-1</span></code> to indicate
mission complete. The reply holds the key <code class="docutils literal notranslate"><span class="pre">currentWP</span></code> with an
integer representing the current wp.</p>
<dl class="simple">
<dt><strong>Nack reasons:</strong></dt><dd><ul class="simple">
<li><p>None</p></li>
</ul>
</dd>
</dl>
<div class="literal-block-wrapper docutils container" id="id54">
<div class="code-block-caption"><span class="caption-text">Function call: <code class="docutils literal notranslate"><span class="pre">get_currentWP</span></code></span><a class="headerlink" href="#id54" title="Permalink to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="p">{</span>
<span class="linenos">2</span><span class="w">  </span><span class="nt">&quot;fcn&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;get_currentWP&quot;</span><span class="p">,</span>
<span class="linenos">3</span><span class="w">  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;requestor id&gt;&quot;</span>
<span class="linenos">4</span><span class="p">}</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id55">
<div class="code-block-caption"><span class="caption-text">Function response:</span><a class="headerlink" href="#id55" title="Permalink to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="p">{</span>
<span class="linenos">2</span><span class="w">  </span><span class="nt">&quot;fcn&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ack&quot;</span><span class="p">,</span>
<span class="linenos">3</span><span class="w">  </span><span class="nt">&quot;call&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;get_currentWP&quot;</span><span class="p">,</span>
<span class="linenos">4</span><span class="w">  </span><span class="nt">&quot;currentWP&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span>
<span class="linenos">5</span><span class="w">  </span><span class="nt">&quot;finalWP&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span>
<span class="linenos">6</span><span class="p">}</span>
</pre></div>
</div>
</div>
</section>
<section id="fcn-get-flightmode">
<span id="getflightmode"></span><h3><span class="section-number">2.3.33. </span>Fcn: <code class="docutils literal notranslate"><span class="pre">get_flightmode</span></code><a class="headerlink" href="#fcn-get-flightmode" title="Permalink to this heading">¶</a></h3>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><img alt="_images/ArduPilot-not_implemented-lightgrey.png" src="_images/ArduPilot-not_implemented-lightgrey.png" />
</td>
<td><img alt="_images/DJI-implemented-blue.png" src="_images/DJI-implemented-blue.png" />
</td>
<td><img alt="_images/py--client-not_implemented-lightgrey.png" src="_images/py--client-not_implemented-lightgrey.png" />
</td>
</tr>
</tbody>
</table>
<p>The function <code class="docutils literal notranslate"><span class="pre">get_flightmode</span></code> requests the current flight mode from
the Drone Safety System. The reply holds the key <code class="docutils literal notranslate"><span class="pre">flightmode</span></code> with a string
describing the flight mode.</p>
<div class="admonition-todo admonition" id="id2">
<p class="admonition-title">Todo</p>
<p>do we need to unify flight modes returned? Landing vs land etc.</p>
</div>
<div class="literal-block-wrapper docutils container" id="id56">
<div class="code-block-caption"><span class="caption-text">Function call: <code class="docutils literal notranslate"><span class="pre">get_flightmode</span></code></span><a class="headerlink" href="#id56" title="Permalink to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="p">{</span>
<span class="linenos">2</span><span class="w">  </span><span class="nt">&quot;fcn&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;get_flightmode&quot;</span><span class="p">,</span>
<span class="linenos">3</span><span class="w">  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;requestor id&gt;&quot;</span>
<span class="linenos">4</span><span class="p">}</span>
</pre></div>
</div>
</div>
<dl class="simple">
<dt><strong>Nack reasons:</strong></dt><dd><ul class="simple">
<li><p>None</p></li>
</ul>
</dd>
</dl>
<div class="literal-block-wrapper docutils container" id="id57">
<div class="code-block-caption"><span class="caption-text">Function response:</span><a class="headerlink" href="#id57" title="Permalink to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="p">{</span>
<span class="linenos">2</span><span class="w">  </span><span class="nt">&quot;fcn&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ack&quot;</span><span class="p">,</span>
<span class="linenos">3</span><span class="w">  </span><span class="nt">&quot;call&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;get_flightmode&quot;</span><span class="p">,</span>
<span class="linenos">4</span><span class="w">  </span><span class="nt">&quot;flightmode&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Guided&quot;</span>
<span class="linenos">5</span><span class="p">}</span>
</pre></div>
</div>
</div>
</section>
<section id="fcn-get-metadata">
<span id="fcngetmetadata"></span><h3><span class="section-number">2.3.34. </span>Fcn: <code class="docutils literal notranslate"><span class="pre">get_metadata</span></code><a class="headerlink" href="#fcn-get-metadata" title="Permalink to this heading">¶</a></h3>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><img alt="_images/ArduPilot-not_implemented-lightgrey.png" src="_images/ArduPilot-not_implemented-lightgrey.png" />
</td>
<td><img alt="_images/DJI-verified-brightgreen.png" src="_images/DJI-verified-brightgreen.png" />
</td>
<td><img alt="_images/py--client-verified-brightgreen.png" src="_images/py--client-verified-brightgreen.png" />
</td>
</tr>
</tbody>
</table>
<p>The function <code class="docutils literal notranslate"><span class="pre">get_metadata</span></code> requests metadata from the photos of the
current session.</p>
<p>The key <code class="docutils literal notranslate"><span class="pre">index</span></code> can be set to a integer for a specific index or the
string <code class="docutils literal notranslate"><span class="pre">&quot;all&quot;</span></code> for all metadata or the string <code class="docutils literal notranslate"><span class="pre">&quot;latest&quot;</span></code> for the
latest metadata.</p>
<p>The key <code class="docutils literal notranslate"><span class="pre">reference</span></code> specifies what coordinate system the metadata
shall be given in, <code class="docutils literal notranslate"><span class="pre">&quot;LLA&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;NED&quot;</span></code> or <code class="docutils literal notranslate"><span class="pre">&quot;XYZ&quot;</span></code>.</p>
<p>The response format is the same as described in the
<a class="reference internal" href="#dssinfolinkapi"><span class="std std-ref">DSS Info-link API</span></a> with the additional keys “index”, “filename” and
“pitch for gimbal pitch” as shown below.</p>
<div class="literal-block-wrapper docutils container" id="id58">
<div class="code-block-caption"><span class="caption-text">Function call: <code class="docutils literal notranslate"><span class="pre">get_metadata</span></code></span><a class="headerlink" href="#id58" title="Permalink to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="p">{</span>
<span class="linenos">2</span><span class="w">  </span><span class="nt">&quot;fcn&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;get_metadata&quot;</span><span class="p">,</span>
<span class="linenos">3</span><span class="w">  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;requestor id&gt;&quot;</span><span class="p">,</span>
<span class="linenos">4</span><span class="w">  </span><span class="nt">&quot;ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;XYZ&quot;</span><span class="p">,</span>
<span class="linenos">5</span><span class="w">  </span><span class="nt">&quot;index&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;latest&quot;</span>
<span class="linenos">6</span><span class="p">}</span>
</pre></div>
</div>
</div>
<dl class="simple">
<dt><strong>Nack reasons:</strong></dt><dd><ul class="simple">
<li><p>Reference faulty, &lt;ref&gt;</p></li>
<li><p>Index out of range, &lt;index&gt;</p></li>
<li><p>Index string faulty, &lt;index&gt;</p></li>
</ul>
</dd>
</dl>
<div class="literal-block-wrapper docutils container" id="id59">
<div class="code-block-caption"><span class="caption-text">Function response:</span><a class="headerlink" href="#id59" title="Permalink to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="p">{</span>
<span class="linenos"> 2</span><span class="w">  </span><span class="nt">&quot;fcn&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ack&quot;</span><span class="p">,</span>
<span class="linenos"> 3</span><span class="w">  </span><span class="nt">&quot;call&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;get_metadata&quot;</span><span class="p">,</span>
<span class="linenos"> 4</span><span class="w">  </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="linenos"> 5</span><span class="w">    </span><span class="nt">&quot;0&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="linenos"> 6</span><span class="w">      </span><span class="nt">&quot;index&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="linenos"> 7</span><span class="w">      </span><span class="nt">&quot;filename&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;the_filename.file_type&quot;</span><span class="p">,</span>
<span class="linenos"> 8</span><span class="w">      </span><span class="nt">&quot;x&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="linenos"> 9</span><span class="w">      </span><span class="nt">&quot;y&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span>
<span class="linenos">10</span><span class="w">      </span><span class="nt">&quot;z&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">-15</span><span class="p">,</span>
<span class="linenos">11</span><span class="w">      </span><span class="nt">&quot;agl&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">-1</span><span class="p">,</span>
<span class="linenos">12</span><span class="w">      </span><span class="nt">&quot;heading&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span>
<span class="linenos">13</span><span class="w">      </span><span class="nt">&quot;pitch&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">-45</span>
<span class="linenos">14</span><span class="w">    </span><span class="p">},</span>
<span class="linenos">15</span><span class="w">    </span><span class="nt">&quot;1&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">16</span><span class="w">      </span><span class="nt">&quot;...&quot;</span><span class="p">:</span><span class="s2">&quot;...&quot;</span>
<span class="linenos">17</span><span class="w">    </span><span class="p">}</span>
<span class="linenos">18</span><span class="w">  </span><span class="p">}</span>
<span class="linenos">19</span><span class="p">}</span>
</pre></div>
</div>
</div>
</section>
<section id="fcn-get-posd">
<span id="getposd"></span><h3><span class="section-number">2.3.35. </span>Fcn: <code class="docutils literal notranslate"><span class="pre">get_posD</span></code><a class="headerlink" href="#fcn-get-posd" title="Permalink to this heading">¶</a></h3>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><img alt="_images/ArduPilot-not_implemented-lightgrey.png" src="_images/ArduPilot-not_implemented-lightgrey.png" />
</td>
<td><img alt="_images/DJI-verified-brightgreen.png" src="_images/DJI-verified-brightgreen.png" />
</td>
<td><img alt="_images/py--client-verified-brightgreen.png" src="_images/py--client-verified-brightgreen.png" />
</td>
</tr>
</tbody>
</table>
<p>The function <code class="docutils literal notranslate"><span class="pre">get_posD</span></code> requests the current position down
referenced from the init position - negative values means that the
drone is above the init point.</p>
<p>The reply holds the key <code class="docutils literal notranslate"><span class="pre">posD</span></code> with a double representing the
position down.</p>
<div class="literal-block-wrapper docutils container" id="id60">
<div class="code-block-caption"><span class="caption-text">Function call: <code class="docutils literal notranslate"><span class="pre">get_posD</span></code></span><a class="headerlink" href="#id60" title="Permalink to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="p">{</span>
<span class="linenos">2</span><span class="w">  </span><span class="nt">&quot;fcn&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;get_posD&quot;</span><span class="p">,</span>
<span class="linenos">3</span><span class="w">  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;requestor id&gt;&quot;</span>
<span class="linenos">4</span><span class="p">}</span>
</pre></div>
</div>
</div>
<dl class="simple">
<dt><strong>Nack reasons:</strong></dt><dd><ul class="simple">
<li><p>None</p></li>
</ul>
</dd>
</dl>
<div class="literal-block-wrapper docutils container" id="id61">
<div class="code-block-caption"><span class="caption-text">Function response:</span><a class="headerlink" href="#id61" title="Permalink to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="p">{</span>
<span class="linenos">2</span><span class="w">  </span><span class="nt">&quot;fcn&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ack&quot;</span><span class="p">,</span>
<span class="linenos">3</span><span class="w">  </span><span class="nt">&quot;call&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;get_posD&quot;</span><span class="p">,</span>
<span class="linenos">4</span><span class="w">  </span><span class="nt">&quot;posD&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">-4.2</span>
<span class="linenos">5</span><span class="p">}</span>
</pre></div>
</div>
</div>
</section>
<section id="fcn-get-pwm">
<span id="getpwm"></span><h3><span class="section-number">2.3.36. </span>Fcn: <code class="docutils literal notranslate"><span class="pre">get_PWM</span></code><a class="headerlink" href="#fcn-get-pwm" title="Permalink to this heading">¶</a></h3>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><img alt="_images/ArduPilot-not_implemented-lightgrey.png" src="_images/ArduPilot-not_implemented-lightgrey.png" />
</td>
</tr>
</tbody>
</table>
<p>The function <code class="docutils literal notranslate"><span class="pre">get_PWM</span></code> requests the current PWM value for RC channel
specified. Relates to Ardupilot only.</p>
<p>The response holds a key <code class="docutils literal notranslate"><span class="pre">channel</span></code> with an integer of the requested
channel number and a key <code class="docutils literal notranslate"><span class="pre">PWM</span></code> with an integer representing its PWM
value.</p>
<div class="literal-block-wrapper docutils container" id="id62">
<div class="code-block-caption"><span class="caption-text">Function call: <code class="docutils literal notranslate"><span class="pre">get_PWM</span></code></span><a class="headerlink" href="#id62" title="Permalink to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="p">{</span>
<span class="linenos">2</span><span class="w">  </span><span class="nt">&quot;fcn&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;get_PWM&quot;</span><span class="p">,</span>
<span class="linenos">3</span><span class="w">  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;requestor id&gt;&quot;</span><span class="p">,</span>
<span class="linenos">4</span><span class="w">  </span><span class="nt">&quot;channel&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">13</span>
<span class="linenos">5</span><span class="p">}</span>
</pre></div>
</div>
</div>
<dl class="simple">
<dt><strong>Nack reasons:</strong></dt><dd><ul class="simple">
<li><p>None</p></li>
</ul>
</dd>
</dl>
<div class="literal-block-wrapper docutils container" id="id63">
<div class="code-block-caption"><span class="caption-text">Function response:</span><a class="headerlink" href="#id63" title="Permalink to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="p">{</span>
<span class="linenos">2</span><span class="w">  </span><span class="nt">&quot;fcn&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ack&quot;</span><span class="p">,</span>
<span class="linenos">3</span><span class="w">  </span><span class="nt">&quot;call&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;get_PWM&quot;</span><span class="p">,</span>
<span class="linenos">4</span><span class="w">  </span><span class="nt">&quot;PWM&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1001</span>
<span class="linenos">5</span><span class="p">}</span>
</pre></div>
</div>
</div>
</section>
<section id="fcn-disconnect">
<span id="fcndisconnect"></span><h3><span class="section-number">2.3.37. </span>Fcn: <code class="docutils literal notranslate"><span class="pre">disconnect</span></code><a class="headerlink" href="#fcn-disconnect" title="Permalink to this heading">¶</a></h3>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><img alt="_images/ArduPilot-not_implemented-lightgrey.png" src="_images/ArduPilot-not_implemented-lightgrey.png" />
</td>
<td><img alt="_images/DJI-verified-brightgreen.png" src="_images/DJI-verified-brightgreen.png" />
</td>
<td><img alt="_images/py--client-verified-brightgreen.png" src="_images/py--client-verified-brightgreen.png" />
</td>
</tr>
</tbody>
</table>
<p>The function <code class="docutils literal notranslate"><span class="pre">disconnect</span></code> informs the Drone Safety System that application will
disconnect. Drone Safety System will enter a hover, honor the heartbeat
functionality, but immediately call the CRM <a class="reference internal" href="CRM_API.html#fcnapplost"><span class="std std-ref">Fcn: app_lost</span></a> if CRM
is in use.</p>
<div class="literal-block-wrapper docutils container" id="id64">
<div class="code-block-caption"><span class="caption-text">Function call: <code class="docutils literal notranslate"><span class="pre">disconnect</span></code></span><a class="headerlink" href="#id64" title="Permalink to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="p">{</span>
<span class="linenos">2</span><span class="w">  </span><span class="nt">&quot;fcn&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;disconnect&quot;</span><span class="p">,</span>
<span class="linenos">3</span><span class="w">  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;requestor id&gt;&quot;</span>
<span class="linenos">4</span><span class="p">}</span>
</pre></div>
</div>
</div>
<dl class="simple">
<dt><strong>Nack reasons:</strong></dt><dd><ul class="simple">
<li><p>Requester is not the DSS owner</p></li>
</ul>
</dd>
</dl>
</section>
<section id="fcn-data-stream">
<span id="fcndatastream"></span><h3><span class="section-number">2.3.38. </span>Fcn: <code class="docutils literal notranslate"><span class="pre">data_stream</span></code><a class="headerlink" href="#fcn-data-stream" title="Permalink to this heading">¶</a></h3>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><img alt="_images/ArduPilot-not_implemented-lightgrey.png" src="_images/ArduPilot-not_implemented-lightgrey.png" />
</td>
<td><img alt="_images/DJI-verified-brightgreen.png" src="_images/DJI-verified-brightgreen.png" />
</td>
<td><img alt="_images/py--client-verified-brightgreen.png" src="_images/py--client-verified-brightgreen.png" />
</td>
</tr>
</tbody>
</table>
<p>The function <code class="docutils literal notranslate"><span class="pre">data_stream</span></code> enables or disables a data stream on the
INFO-socket.</p>
<p>The key <code class="docutils literal notranslate"><span class="pre">stream</span></code> is used to specify the wanted stream.</p>
<p>The key <code class="docutils literal notranslate"><span class="pre">enable</span></code> that takes a bool to enable or disable the stream.</p>
<p>Available stream values are:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Stream</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>ATT</p></td>
<td><p>Roll, pitch, yaw</p></td>
</tr>
<tr class="row-odd"><td><p>LLA</p></td>
<td><p>Lat, long, alt</p></td>
</tr>
<tr class="row-even"><td><p>NED</p></td>
<td><p>PosN, posE, posD</p></td>
</tr>
<tr class="row-odd"><td><p>XYZ</p></td>
<td><p>X, Y, Z</p></td>
</tr>
<tr class="row-even"><td><p>photo_LLA</p></td>
<td><p>Metadata with LLA format</p></td>
</tr>
<tr class="row-odd"><td><p>photo_XYZ</p></td>
<td><p>Metadata with XYZ format</p></td>
</tr>
<tr class="row-even"><td><p>currentWP</p></td>
<td><p>Current wp and final wp</p></td>
</tr>
<tr class="row-odd"><td><p>battery</p></td>
<td><p>Battery status</p></td>
</tr>
</tbody>
</table>
<p>Drone Safety System will publish data as soon as new data is available. The format
of the published data is described in the <a class="reference internal" href="#dssinfolinkapi"><span class="std std-ref">DSS Info-link API</span></a>.</p>
<div class="literal-block-wrapper docutils container" id="id65">
<div class="code-block-caption"><span class="caption-text">Function call: <code class="docutils literal notranslate"><span class="pre">data_stream</span></code></span><a class="headerlink" href="#id65" title="Permalink to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="p">{</span>
<span class="linenos">2</span><span class="w">  </span><span class="nt">&quot;fcn&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;data_stream&quot;</span><span class="p">,</span>
<span class="linenos">3</span><span class="w">  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;requestor id&gt;&quot;</span><span class="p">,</span>
<span class="linenos">4</span><span class="w">  </span><span class="nt">&quot;stream&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;LLA&quot;</span><span class="p">,</span>
<span class="linenos">5</span><span class="w">  </span><span class="nt">&quot;enable&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
<span class="linenos">6</span><span class="p">}</span>
</pre></div>
</div>
</div>
<dl class="simple">
<dt><strong>Nack reasons:</strong></dt><dd><ul class="simple">
<li><p>Stream faulty, &lt;stream&gt;</p></li>
</ul>
</dd>
</dl>
<div class="literal-block-wrapper docutils container" id="id66">
<div class="code-block-caption"><span class="caption-text">Function response:</span><a class="headerlink" href="#id66" title="Permalink to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="p">{</span>
<span class="linenos">2</span><span class="w">  </span><span class="nt">&quot;fcn&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ack&quot;</span><span class="p">,</span>
<span class="linenos">3</span><span class="w">  </span><span class="nt">&quot;call&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;data_stream&quot;</span>
<span class="linenos">4</span><span class="p">}</span>
</pre></div>
</div>
</div>
</section>
</section>
<section id="dss-info-link-api">
<span id="dssinfolinkapi"></span><h2><span class="section-number">2.4. </span>DSS Info-link API<a class="headerlink" href="#dss-info-link-api" title="Permalink to this heading">¶</a></h2>
<p>Streams of information can be controlled using the function
<a class="reference internal" href="#fcndatastream"><span class="std std-ref">Fcn: data_stream</span></a>. The information is published on the Info-socket
together with the corresponding attribute as topic. The format for
each attribute is described in the following sections.</p>
<section id="state-state-data">
<span id="state"></span><h3><span class="section-number">2.4.1. </span>STATE - State data<a class="headerlink" href="#state-state-data" title="Permalink to this heading">¶</a></h3>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><img alt="_images/ArduPilot-not_implemented-lightgrey.png" src="_images/ArduPilot-not_implemented-lightgrey.png" />
</td>
<td><img alt="_images/DJI-not_implemented-lightgrey.png" src="_images/DJI-not_implemented-lightgrey.png" />
</td>
</tr>
</tbody>
</table>
<p>The state data is published with topic “STATE”. The message contains a
combination of other streams and most often covers the need of information.
Although, avoid using this message if not nessesary since it will add load to
the network. example.</p>
<p>Lat, long [Decimal degrees]; Alt [m AMSL]; Heading [degrees relative true
north]; Agl [m] above ground, -1 if not valid; . vel_n, vel_e, vel_d [m/s] in
NED frame and gnss_state [0-6] with mapping described below, key ‘flight_state’
reports a state machine that is initiated ‘ground’ and then toggles between
‘flying’ and ‘landed’.</p>
<div class="literal-block-wrapper docutils container" id="id67">
<div class="code-block-caption"><span class="caption-text">GNSS_STATE look up table</span><a class="headerlink" href="#id67" title="Permalink to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="p">{</span>
<span class="linenos">2</span><span class="w">  </span><span class="p">[</span><span class="s2">&quot;NO_GPS&quot;</span><span class="p">,</span>
<span class="linenos">3</span><span class="w">  </span><span class="s2">&quot;NO_FIX&quot;</span><span class="p">,</span>
<span class="linenos">4</span><span class="w">  </span><span class="s2">&quot;GPS_OK_FIX_2D&quot;</span><span class="p">,</span>
<span class="linenos">5</span><span class="w">  </span><span class="s2">&quot;GPS_OK_FIX_3D&quot;</span><span class="p">,</span>
<span class="linenos">6</span><span class="w">  </span><span class="s2">&quot;GPS_OK_FIX_3D_DGPS&quot;</span><span class="p">,</span>
<span class="linenos">7</span><span class="w">  </span><span class="s2">&quot;GPS_OK_FIX_3D_RTK_FLOAT&quot;</span><span class="p">,</span>
<span class="linenos">8</span><span class="w">  </span><span class="s2">&quot;GPS_OK_FIX_3D_RTK_FIXED&quot;</span><span class="p">]</span>
<span class="linenos">9</span><span class="p">}</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id68">
<div class="code-block-caption"><span class="caption-text">Info-socket: Topic <code class="docutils literal notranslate"><span class="pre">STATE</span></code></span><a class="headerlink" href="#id68" title="Permalink to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="p">{</span>
<span class="linenos"> 2</span><span class="w">  </span><span class="nt">&quot;lat&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">-0.0018926148768514395</span><span class="p">,</span>
<span class="linenos"> 3</span><span class="w">  </span><span class="nt">&quot;long&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0014366497052833438</span><span class="p">,</span>
<span class="linenos"> 4</span><span class="w">  </span><span class="nt">&quot;alt&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">28.3</span><span class="p">,</span>
<span class="linenos"> 5</span><span class="w">  </span><span class="nt">&quot;heading&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">359</span><span class="p">,</span>
<span class="linenos"> 6</span><span class="w">  </span><span class="nt">&quot;agl&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">-1</span><span class="p">,</span>
<span class="linenos"> 7</span><span class="w">  </span><span class="nt">&quot;vel_n&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">2.2</span><span class="p">,</span>
<span class="linenos"> 8</span><span class="w">  </span><span class="nt">&quot;vel_e&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="linenos"> 9</span><span class="w">  </span><span class="nt">&quot;vel_d&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">-1.1</span><span class="p">,</span>
<span class="linenos">10</span><span class="w">  </span><span class="nt">&quot;gnss_state&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span>
<span class="linenos">11</span><span class="w">  </span><span class="nt">&quot;flight_state&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;landed&quot;</span>
<span class="linenos">12</span><span class="p">}</span>
</pre></div>
</div>
</div>
</section>
<section id="att-attitude-data">
<span id="att"></span><h3><span class="section-number">2.4.2. </span>ATT - Attitude data<a class="headerlink" href="#att-attitude-data" title="Permalink to this heading">¶</a></h3>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><img alt="_images/ArduPilot-not_implemented-lightgrey.png" src="_images/ArduPilot-not_implemented-lightgrey.png" />
</td>
<td><img alt="_images/DJI-not_implemented-lightgrey.png" src="_images/DJI-not_implemented-lightgrey.png" />
</td>
</tr>
</tbody>
</table>
<p>The attitude data is published with topic “ATT”. The message contains
the key “roll” for roll angle [radians], “pitch” for pitch angle
[radians] and “yaw” for yaw angle [radians].</p>
<p>Positive roll is leanding right in the body-fixed frame, positive
pitch is nose up and increasing yaw is clockwise rotation. Yaw
reference is given relative true north (0 = north).</p>
<div class="literal-block-wrapper docutils container" id="id69">
<div class="code-block-caption"><span class="caption-text">Info-socket: Topic <code class="docutils literal notranslate"><span class="pre">ATT</span></code></span><a class="headerlink" href="#id69" title="Permalink to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="p">{</span>
<span class="linenos">2</span><span class="w">  </span><span class="nt">&quot;roll&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">-0.0018926148768514395</span><span class="p">,</span>
<span class="linenos">3</span><span class="w">  </span><span class="nt">&quot;pitch&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0014366497052833438</span><span class="p">,</span>
<span class="linenos">4</span><span class="w">  </span><span class="nt">&quot;yaw&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0123</span>
<span class="linenos">5</span><span class="p">}</span>
</pre></div>
</div>
</div>
</section>
<section id="lla-global-position-data">
<span id="lla"></span><h3><span class="section-number">2.4.3. </span>LLA - Global position data<a class="headerlink" href="#lla-global-position-data" title="Permalink to this heading">¶</a></h3>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><img alt="_images/ArduPilot-not_implemented-lightgrey.png" src="_images/ArduPilot-not_implemented-lightgrey.png" />
</td>
<td><img alt="_images/DJI-verified-brightgreen.png" src="_images/DJI-verified-brightgreen.png" />
</td>
<td><img alt="_images/py--client-verified-brightgreen.png" src="_images/py--client-verified-brightgreen.png" />
</td>
</tr>
</tbody>
</table>
<p>Position data given in the global frame is published on the topic “LLA”.
The message contains the key “lat” of latitude [decimal degrees],
“lon” for longitude [decimal degrees], “alt” for AMSL [m], agl for
above ground [m] and “heading” for heading relative true north [deg]. If
the AGL sensor is not valid it will report -1.</p>
<div class="literal-block-wrapper docutils container" id="id70">
<div class="code-block-caption"><span class="caption-text">Info-socket: Topic <code class="docutils literal notranslate"><span class="pre">LLA</span></code></span><a class="headerlink" href="#id70" title="Permalink to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="p">{</span>
<span class="linenos">2</span><span class="w">  </span><span class="nt">&quot;lat&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">58.3254094</span><span class="p">,</span>
<span class="linenos">3</span><span class="w">  </span><span class="nt">&quot;lon&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">15.6324897</span><span class="p">,</span>
<span class="linenos">4</span><span class="w">  </span><span class="nt">&quot;alt&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">114.1</span><span class="p">,</span>
<span class="linenos">5</span><span class="w">  </span><span class="nt">&quot;heading&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">359</span><span class="p">,</span>
<span class="linenos">6</span><span class="w">  </span><span class="nt">&quot;agl&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span>
<span class="linenos">7</span><span class="p">}</span>
</pre></div>
</div>
</div>
</section>
<section id="ned-local-position-data">
<span id="ned"></span><h3><span class="section-number">2.4.4. </span>NED - Local position data<a class="headerlink" href="#ned-local-position-data" title="Permalink to this heading">¶</a></h3>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><img alt="_images/ArduPilot-not_implemented-lightgrey.png" src="_images/ArduPilot-not_implemented-lightgrey.png" />
</td>
<td><img alt="_images/DJI-verified-brightgreen.png" src="_images/DJI-verified-brightgreen.png" />
</td>
<td><img alt="_images/py--client-verified-brightgreen.png" src="_images/py--client-verified-brightgreen.png" />
</td>
</tr>
</tbody>
</table>
<p>Position data given in the local NED frame published with topic NED.
The message contains the key “north” for north [m], “east” for east
[m], “down” for down [m], “agl” for above ground level [m] and “heading”
for heading relative true north [deg]. North, east, down are relative
the init position. If the AGL sensor is not valid it will report -1.</p>
<div class="literal-block-wrapper docutils container" id="id71">
<div class="code-block-caption"><span class="caption-text">Info-socket: Topic <code class="docutils literal notranslate"><span class="pre">NED</span></code></span><a class="headerlink" href="#id71" title="Permalink to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="p">{</span>
<span class="linenos">2</span><span class="w">  </span><span class="nt">&quot;north&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">10.2</span><span class="p">,</span>
<span class="linenos">3</span><span class="w">  </span><span class="nt">&quot;east&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="linenos">4</span><span class="w">  </span><span class="nt">&quot;down&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">-15</span><span class="p">,</span>
<span class="linenos">5</span><span class="w">  </span><span class="nt">&quot;agl&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span>
<span class="linenos">6</span><span class="w">  </span><span class="nt">&quot;heading&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">359</span>
<span class="linenos">7</span><span class="p">}</span>
</pre></div>
</div>
</div>
</section>
<section id="xyz-local-position-data">
<span id="xyz"></span><h3><span class="section-number">2.4.5. </span>XYZ - Local position data<a class="headerlink" href="#xyz-local-position-data" title="Permalink to this heading">¶</a></h3>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><img alt="_images/ArduPilot-not_implemented-lightgrey.png" src="_images/ArduPilot-not_implemented-lightgrey.png" />
</td>
<td><img alt="_images/DJI-verified-brightgreen.png" src="_images/DJI-verified-brightgreen.png" />
</td>
<td><img alt="_images/py--client-verified-brightgreen.png" src="_images/py--client-verified-brightgreen.png" />
</td>
</tr>
</tbody>
</table>
<p>Position data given in the local XYZ frame published with topic XYZ,
refer to <a class="reference internal" href="#xyzcoordinatesystem"><span class="std std-ref">XYZ coordinate system</span></a> The message contains the key “x”
for x [m], “y” for y [m], “z” for z [m], “agl” for above ground level
[m] and “heading” for the XYZ heading definition. If the AGL sensor is
not valid it will report -1.</p>
<div class="literal-block-wrapper docutils container" id="id72">
<div class="code-block-caption"><span class="caption-text">Info-socket: Topic <code class="docutils literal notranslate"><span class="pre">XYZ</span></code></span><a class="headerlink" href="#id72" title="Permalink to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="p">{</span>
<span class="linenos">2</span><span class="w">  </span><span class="nt">&quot;x&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">10.2</span><span class="p">,</span>
<span class="linenos">3</span><span class="w">  </span><span class="nt">&quot;y&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="linenos">4</span><span class="w">  </span><span class="nt">&quot;z&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">-15</span><span class="p">,</span>
<span class="linenos">5</span><span class="w">  </span><span class="nt">&quot;agl&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">-1</span><span class="p">,</span>
<span class="linenos">6</span><span class="w">  </span><span class="nt">&quot;heading&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span>
<span class="linenos">7</span><span class="p">}</span>
</pre></div>
</div>
</div>
</section>
<section id="photo-lla-photo-available-with-metadata">
<span id="photolla"></span><h3><span class="section-number">2.4.6. </span>Photo LLA - photo available with Metadata<a class="headerlink" href="#photo-lla-photo-available-with-metadata" title="Permalink to this heading">¶</a></h3>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><img alt="_images/ArduPilot-not_implemented-lightgrey.png" src="_images/ArduPilot-not_implemented-lightgrey.png" />
</td>
<td><img alt="_images/DJI-verified-brightgreen.png" src="_images/DJI-verified-brightgreen.png" />
</td>
<td><img alt="_images/py--client-verified-brightgreen.png" src="_images/py--client-verified-brightgreen.png" />
</td>
</tr>
</tbody>
</table>
<p>Metadata for a photo given in the LLA frame published with topic
photo_LLA. Filename is not available until photo is downloaded. The
message contains the key “index” for photo index, “filename” for photo
filename if available and keys described in <a class="reference internal" href="#lla"><span class="std std-ref">LLA - Global position data</span></a>.</p>
<div class="literal-block-wrapper docutils container" id="id73">
<div class="code-block-caption"><span class="caption-text">Info-socket: Topic <code class="docutils literal notranslate"><span class="pre">photo_LLA</span></code></span><a class="headerlink" href="#id73" title="Permalink to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="p">{</span>
<span class="linenos">2</span><span class="w">  </span><span class="nt">&quot;index&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="linenos">3</span><span class="w">  </span><span class="nt">&quot;filename&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;the_filename.file_type&quot;</span><span class="p">,</span>
<span class="linenos">4</span><span class="w">  </span><span class="nt">&quot;lat&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">58.3254094</span><span class="p">,</span>
<span class="linenos">5</span><span class="w">  </span><span class="nt">&quot;lon&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">15.6324897</span><span class="p">,</span>
<span class="linenos">6</span><span class="w">  </span><span class="nt">&quot;alt&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">114.1</span>
<span class="linenos">7</span><span class="w">  </span><span class="nt">&quot;agl&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span>
<span class="linenos">8</span><span class="w">  </span><span class="nt">&quot;heading&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span>
<span class="linenos">9</span><span class="p">}</span>
</pre></div>
</div>
</div>
</section>
<section id="photo-xyz-new-photo-metadata">
<span id="photoxyz"></span><h3><span class="section-number">2.4.7. </span>Photo XYZ - new photo metadata<a class="headerlink" href="#photo-xyz-new-photo-metadata" title="Permalink to this heading">¶</a></h3>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><img alt="_images/ArduPilot-not_implemented-lightgrey.png" src="_images/ArduPilot-not_implemented-lightgrey.png" />
</td>
<td><img alt="_images/DJI-verified-brightgreen.png" src="_images/DJI-verified-brightgreen.png" />
</td>
<td><img alt="_images/py--client-verified-brightgreen.png" src="_images/py--client-verified-brightgreen.png" />
</td>
</tr>
</tbody>
</table>
<p>Metadata for a photo given in the XYZ frame published with topic
photo_XYZ. Filename is not available until photo is downloaded. The
message contains the key “index” for photo index, “filename” for photo
filename if available and keys described in <a class="reference internal" href="#xyz"><span class="std std-ref">XYZ - Local position data</span></a>.</p>
<div class="literal-block-wrapper docutils container" id="id74">
<div class="code-block-caption"><span class="caption-text">Info-socket: Topic <code class="docutils literal notranslate"><span class="pre">photo_XYZ</span></code></span><a class="headerlink" href="#id74" title="Permalink to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="p">{</span>
<span class="linenos">2</span><span class="w">  </span><span class="nt">&quot;index&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="linenos">3</span><span class="w">  </span><span class="nt">&quot;filename&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;the_filename.file_type&quot;</span><span class="p">,</span>
<span class="linenos">4</span><span class="w">  </span><span class="nt">&quot;x&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="linenos">5</span><span class="w">  </span><span class="nt">&quot;y&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span>
<span class="linenos">6</span><span class="w">  </span><span class="nt">&quot;z&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">-15</span>
<span class="linenos">7</span><span class="w">  </span><span class="nt">&quot;agl&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">-1</span>
<span class="linenos">8</span><span class="w">  </span><span class="nt">&quot;heading&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span>
<span class="linenos">9</span><span class="p">}</span>
</pre></div>
</div>
</div>
</section>
<section id="current-wp-mission-progress">
<span id="currentwp"></span><h3><span class="section-number">2.4.8. </span>Current WP - Mission progress<a class="headerlink" href="#current-wp-mission-progress" title="Permalink to this heading">¶</a></h3>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><img alt="_images/ArduPilot-not_implemented-lightgrey.png" src="_images/ArduPilot-not_implemented-lightgrey.png" />
</td>
<td><img alt="_images/DJI-verified-brightgreen.png" src="_images/DJI-verified-brightgreen.png" />
</td>
<td><img alt="_images/py--client-verified-brightgreen.png" src="_images/py--client-verified-brightgreen.png" />
</td>
</tr>
</tbody>
</table>
<p>Mission progress data is sent every time the Drone Safety System tracks a waypoint.
The message contains the key “currentWP” for the waypoint Drone Safety System is
flying towards  and “finalWP” for the final wp number in the active
mission. When the final wp is reached -1 is sent as currentWP.</p>
<div class="literal-block-wrapper docutils container" id="id75">
<div class="code-block-caption"><span class="caption-text">Info-socket: Topic <code class="docutils literal notranslate"><span class="pre">currentWP</span></code></span><a class="headerlink" href="#id75" title="Permalink to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="p">{</span>
<span class="linenos">2</span><span class="w">  </span><span class="nt">&quot;currentWP&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span>
<span class="linenos">3</span><span class="w">  </span><span class="nt">&quot;finalWP&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span>
<span class="linenos">4</span><span class="p">}</span>
</pre></div>
</div>
</div>
</section>
<section id="battery-battery-status">
<span id="battery"></span><h3><span class="section-number">2.4.9. </span>Battery - Battery status<a class="headerlink" href="#battery-battery-status" title="Permalink to this heading">¶</a></h3>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><img alt="_images/ArduPilot-not_implemented-lightgrey.png" src="_images/ArduPilot-not_implemented-lightgrey.png" />
</td>
<td><img alt="_images/DJI-not_implemented-lightgrey.png" src="_images/DJI-not_implemented-lightgrey.png" />
</td>
<td><img alt="_images/py--client-not_implemented-lightgrey.png" src="_images/py--client-not_implemented-lightgrey.png" />
</td>
</tr>
</tbody>
</table>
<p>Battery status updates are published every 10s. Message holds an
estimated remaining flight time and voltage.</p>
<div class="literal-block-wrapper docutils container" id="id76">
<div class="code-block-caption"><span class="caption-text">Info-socket: Topic <code class="docutils literal notranslate"><span class="pre">battery</span></code></span><a class="headerlink" href="#id76" title="Permalink to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="p">{</span>
<span class="linenos">2</span><span class="w">  </span><span class="nt">&quot;remaining_time&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">2.3</span><span class="p">,</span>
<span class="linenos">3</span><span class="w">  </span><span class="nt">&quot;voltage&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span>
<span class="linenos">4</span><span class="p">}</span>
</pre></div>
</div>
</div>
</section>
</section>
<section id="dss-data-link-api">
<span id="dssdatalinkapi"></span><h2><span class="section-number">2.5. </span>DSS Data-link API<a class="headerlink" href="#dss-data-link-api" title="Permalink to this heading">¶</a></h2>
<p>When data is requested from the Drone Safety System, it publishes the data on the Data-socket
together with the corresponding attribute as topic. Format for each
attribute is described in the following sections.</p>
<section id="photo-download">
<span id="photodownload"></span><h3><span class="section-number">2.5.1. </span>Photo download<a class="headerlink" href="#photo-download" title="Permalink to this heading">¶</a></h3>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><img alt="_images/ArduPilot-not_implemented-lightgrey.png" src="_images/ArduPilot-not_implemented-lightgrey.png" />
</td>
<td><img alt="_images/DJI-verified-brightgreen.png" src="_images/DJI-verified-brightgreen.png" />
</td>
<td><img alt="_images/py--client-verified-brightgreen.png" src="_images/py--client-verified-brightgreen.png" />
</td>
</tr>
</tbody>
</table>
<p>Photos are requested using the function <a class="reference internal" href="#fcnphoto"><span class="std std-ref">Fcn: photo</span></a>. Requested
photos will be published on the Data-socket with the topic photo or
photo_low depending on the resolution. The message contains the key
“photo” with a base64 encoded photo string, “metadata” with json with
the corresponding metadata specified in the photo request. Meta data
keys are described in <a class="reference internal" href="#photolla"><span class="std std-ref">Photo LLA - photo available with Metadata</span></a> and <a class="reference internal" href="#photoxyz"><span class="std std-ref">Photo XYZ - new photo metadata</span></a>.</p>
<div class="literal-block-wrapper docutils container" id="id77">
<div class="code-block-caption"><span class="caption-text">Data-socket: Topic <code class="docutils literal notranslate"><span class="pre">photo</span></code> or topic <code class="docutils literal notranslate"><span class="pre">photo_low</span></code></span><a class="headerlink" href="#id77" title="Permalink to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="p">{</span>
<span class="linenos"> 2</span><span class="w">  </span><span class="nt">&quot;photo&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;base64 encoded photo string&gt;&quot;</span><span class="p">,</span>
<span class="linenos"> 3</span><span class="w">  </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="linenos"> 4</span><span class="w">    </span><span class="nt">&quot;index&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="linenos"> 5</span><span class="w">    </span><span class="nt">&quot;filename&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;the_filename.file_type&quot;</span><span class="p">,</span>
<span class="linenos"> 6</span><span class="w">    </span><span class="nt">&quot;x&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="linenos"> 7</span><span class="w">    </span><span class="nt">&quot;y&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span>
<span class="linenos"> 8</span><span class="w">    </span><span class="nt">&quot;z&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">-15</span><span class="p">,</span>
<span class="linenos"> 9</span><span class="w">    </span><span class="nt">&quot;agl&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">-1</span><span class="p">,</span>
<span class="linenos">10</span><span class="w">    </span><span class="nt">&quot;heading&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span>
<span class="linenos">11</span><span class="w">  </span><span class="p">}</span>
<span class="linenos">12</span><span class="p">}</span>
</pre></div>
</div>
</div>
</section>
</section>
</section>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/logo-rise-html.png" alt="Logo"/>
            </a></p>
<h1 class="logo"><a href="index.html">RISE Drone Platform</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">1. Introduction</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">2. Drone Safety System API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#communication">2.1. Communication</a></li>
<li class="toctree-l2"><a class="reference internal" href="#coordinate-systems">2.2. Coordinate systems</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lla-coordinate-system">2.2.1. LLA coordinate system</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ned-coordinate-system">2.2.2. NED coordinate system</a></li>
<li class="toctree-l3"><a class="reference internal" href="#xyz-coordinate-system">2.2.3. XYZ coordinate system</a></li>
<li class="toctree-l3"><a class="reference internal" href="#geo-fence">2.2.4. Geo fence</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#dss-ctrl-link-api">2.3. DSS Ctrl-link API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#general">2.3.1. General</a></li>
<li class="toctree-l3"><a class="reference internal" href="#fcn-heart-beat">2.3.2. Fcn: <code class="docutils literal notranslate"><span class="pre">heart_beat</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#fcn-get-info">2.3.3. Fcn: get_info</a></li>
<li class="toctree-l3"><a class="reference internal" href="#fcn-who-controls">2.3.4. Fcn: <code class="docutils literal notranslate"><span class="pre">who_controls</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#fcn-get-owner">2.3.5. Fcn: <code class="docutils literal notranslate"><span class="pre">get_owner</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#fcn-set-owner">2.3.6. Fcn: <code class="docutils literal notranslate"><span class="pre">set_owner</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#fcn-set-geofence">2.3.7. Fcn: <code class="docutils literal notranslate"><span class="pre">set_geofence</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#fcn-get-idle">2.3.8. Fcn: <code class="docutils literal notranslate"><span class="pre">get_idle</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#fcn-get-state">2.3.9. Fcn: <code class="docutils literal notranslate"><span class="pre">get_state</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#fcn-set-init-point">2.3.10. Fcn: <code class="docutils literal notranslate"><span class="pre">set_init_point</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#fcn-reset-dss-srtl">2.3.11. Fcn: <code class="docutils literal notranslate"><span class="pre">reset_dss_srtl</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#fcn-arm-take-off">2.3.12. Fcn: <code class="docutils literal notranslate"><span class="pre">arm_take_off</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#fcn-land">2.3.13. Fcn: <code class="docutils literal notranslate"><span class="pre">land</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#fcn-rtl">2.3.14. Fcn: <code class="docutils literal notranslate"><span class="pre">rtl</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#fcn-dss-srtl">2.3.15. Fcn: <code class="docutils literal notranslate"><span class="pre">dss_srtl</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#fcn-set-vel-body">2.3.16. Fcn: <code class="docutils literal notranslate"><span class="pre">set_vel_BODY</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#fcn-set-heading">2.3.17. Fcn: <code class="docutils literal notranslate"><span class="pre">set_heading</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#fcn-set-alt">2.3.18. Fcn: <code class="docutils literal notranslate"><span class="pre">set_alt</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#fcn-set-default-speed">2.3.19. Fcn: <code class="docutils literal notranslate"><span class="pre">set_default_speed</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#fcn-upload-mission-lla">2.3.20. Fcn: <code class="docutils literal notranslate"><span class="pre">upload_mission_LLA</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#fcn-upload-mission-ned">2.3.21. Fcn: <code class="docutils literal notranslate"><span class="pre">upload_mission_NED</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#fcn-upload-mission-xyz">2.3.22. Fcn: <code class="docutils literal notranslate"><span class="pre">upload_mission_XYZ</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#fcn-gogo">2.3.23. Fcn: <code class="docutils literal notranslate"><span class="pre">gogo</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#fcn-set-pattern">2.3.24. Fcn: <code class="docutils literal notranslate"><span class="pre">set_pattern</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#fcn-follow-stream">2.3.25. Fcn: <code class="docutils literal notranslate"><span class="pre">follow_stream</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#fcn-set-gimbal">2.3.26. Fcn: <code class="docutils literal notranslate"><span class="pre">set_gimbal</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#fcn-set-gripper">2.3.27. Fcn: <code class="docutils literal notranslate"><span class="pre">set_gripper</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#fcn-set-spotlight">2.3.28. Fcn: <code class="docutils literal notranslate"><span class="pre">set_spotlight</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#fcn-get-spotlight">2.3.29. Fcn: <code class="docutils literal notranslate"><span class="pre">get_spotlight</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#fcn-photo">2.3.30. Fcn: <code class="docutils literal notranslate"><span class="pre">photo</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#fcn-get-armed">2.3.31. Fcn: <code class="docutils literal notranslate"><span class="pre">get_armed</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#fcn-get-currentwp">2.3.32. Fcn: <code class="docutils literal notranslate"><span class="pre">get_currentWP</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#fcn-get-flightmode">2.3.33. Fcn: <code class="docutils literal notranslate"><span class="pre">get_flightmode</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#fcn-get-metadata">2.3.34. Fcn: <code class="docutils literal notranslate"><span class="pre">get_metadata</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#fcn-get-posd">2.3.35. Fcn: <code class="docutils literal notranslate"><span class="pre">get_posD</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#fcn-get-pwm">2.3.36. Fcn: <code class="docutils literal notranslate"><span class="pre">get_PWM</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#fcn-disconnect">2.3.37. Fcn: <code class="docutils literal notranslate"><span class="pre">disconnect</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#fcn-data-stream">2.3.38. Fcn: <code class="docutils literal notranslate"><span class="pre">data_stream</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#dss-info-link-api">2.4. DSS Info-link API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#state-state-data">2.4.1. STATE - State data</a></li>
<li class="toctree-l3"><a class="reference internal" href="#att-attitude-data">2.4.2. ATT - Attitude data</a></li>
<li class="toctree-l3"><a class="reference internal" href="#lla-global-position-data">2.4.3. LLA - Global position data</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ned-local-position-data">2.4.4. NED - Local position data</a></li>
<li class="toctree-l3"><a class="reference internal" href="#xyz-local-position-data">2.4.5. XYZ - Local position data</a></li>
<li class="toctree-l3"><a class="reference internal" href="#photo-lla-photo-available-with-metadata">2.4.6. Photo LLA - photo available with Metadata</a></li>
<li class="toctree-l3"><a class="reference internal" href="#photo-xyz-new-photo-metadata">2.4.7. Photo XYZ - new photo metadata</a></li>
<li class="toctree-l3"><a class="reference internal" href="#current-wp-mission-progress">2.4.8. Current WP - Mission progress</a></li>
<li class="toctree-l3"><a class="reference internal" href="#battery-battery-status">2.4.9. Battery - Battery status</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#dss-data-link-api">2.5. DSS Data-link API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#photo-download">2.5.1. Photo download</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="CRM_API.html">3. Central Resource Manager API</a></li>
<li class="toctree-l1"><a class="reference internal" href="Application_API.html">4. Application API</a></li>
<li class="toctree-l1"><a class="reference internal" href="TYRApp_API.html">5. TYRApp API</a></li>
<li class="toctree-l1"><a class="reference internal" href="SkarApp_API.html">6. SkarApp API</a></li>
<li class="toctree-l1"><a class="reference internal" href="APP_selfie_API.html">7. APP Selfie API</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="introduction.html" title="previous chapter"><span class="section-number">1. </span>Introduction</a></li>
      <li>Next: <a href="CRM_API.html" title="next chapter"><span class="section-number">3. </span>Central Resource Manager API</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2021, Andreas Gising, Lennart Ochel.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 6.1.3</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.8</a>
      
      |
      <a href="_sources/DSS_API.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>